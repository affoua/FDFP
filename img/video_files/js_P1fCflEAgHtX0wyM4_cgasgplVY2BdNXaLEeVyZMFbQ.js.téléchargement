(function($){Drupal.behaviors.dexp_bxslider={attach:function(context,settings){$(".dexp-bxslider").once("dexp-bxslider",function(){var $this=$(this),responsiveID=$(this).attr("id");settings.dexpbxsliders[responsiveID].total=$(".bxslide",$this).length;var options=dexp_adjust_options(settings.dexpbxsliders[responsiveID],$this.innerWidth());options.pagerCustom=options.pagerCustom||"";settings.dexpbxsliders[responsiveID].pageCustomClone=null;if(options.pagerCustom!=""&&$(options.pagerCustom).length==
1)settings.dexpbxsliders[responsiveID].pageCustomClone=$(options.pagerCustom).clone();var slide=$(this).bxSlider(options);if(options.auto)setInterval(function(){slide.startAuto()},options.pause);var windowW=$(window).width();var resizeH=null;$(window).resize(function(){clearTimeout(resizeH);resizeH=setTimeout(function(){if(windowW==$(window).width())return;windowW=$(window).width();slide=dexp_adjust_slide($this,settings.dexpbxsliders[responsiveID],slide)},1E3)}).load(function(){slide=dexp_adjust_slide($this,
settings.dexpbxsliders[responsiveID],slide)})})}};function dexp_adjust_slide(slide_element,options,slide_handler){slide_handler.destroySlider();$(options.pagerCustom).remove();slide_element.after(options.pageCustomClone);var new_options=dexp_adjust_options(options,slide_element.innerWidth());return slide_element.bxSlider(new_options)}function dexp_adjust_options(options,container_width){var _options={};$.extend(_options,options);var wWidth=$(window).width();if(wWidth>=1200)_options.maxSlides=_options.minSlides=
parseInt(options.lg_items);else if(wWidth>991&&wWidth<1200)_options.maxSlides=_options.minSlides=parseInt(options.md_items);else if(wWidth>767&&wWidth<992)_options.maxSlides=_options.minSlides=parseInt(options.sm_items);else _options.maxSlides=_options.minSlides=parseInt(options.xs_items);if(_options.maxSlides>_options.total);_options.slideWidth=(container_width-_options.slideMargin*(_options.maxSlides-1))/_options.maxSlides;return _options}})(jQuery);;
!function(t){var e={},s={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,
controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4E3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){},onSliderResize:function(){}};t.fn.bxSlider=function(n){if(0==this.length)return this;
if(this.length>1)return this.each(function(){t(this).bxSlider(n)}),this;var o={},r=this;e.el=this;var a=t(window).width(),l=t(window).height(),d=function(){o.settings=t.extend({},s,n),o.settings.slideWidth=parseInt(o.settings.slideWidth),o.children=r.children(o.settings.slideSelector),o.children.length<o.settings.minSlides&&(o.settings.minSlides=o.children.length),o.children.length<o.settings.maxSlides&&(o.settings.maxSlides=o.children.length),o.settings.randomStart&&(o.settings.startSlide=Math.floor(Math.random()*
o.children.length)),o.active={index:o.settings.startSlide},o.carousel=o.settings.minSlides>1||o.settings.maxSlides>1,o.carousel&&(o.settings.preloadImages="all"),o.minThreshold=o.settings.minSlides*o.settings.slideWidth+(o.settings.minSlides-1)*o.settings.slideMargin,o.maxThreshold=o.settings.maxSlides*o.settings.slideWidth+(o.settings.maxSlides-1)*o.settings.slideMargin,o.working=!1,o.controls={},o.interval=null,o.animProp="vertical"==o.settings.mode?"top":"left",o.usingCSS=o.settings.useCSS&&"fade"!=
o.settings.mode&&function(){var t=document.createElement("div"),e=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in e)if(void 0!==t.style[e[i]])return o.cssPrefix=e[i].replace("Perspective","").toLowerCase(),o.animProp="-"+o.cssPrefix+"-transform",!0;return!1}(),"vertical"==o.settings.mode&&(o.settings.maxSlides=o.settings.minSlides),r.data("origStyle",r.attr("style")),r.children(o.settings.slideSelector).each(function(){t(this).data("origStyle",t(this).attr("style"))}),
c()},c=function(){r.wrap('<div class="bx-wrapper"><div class="bx-viewport"></div></div>'),o.viewport=r.parent(),o.loader=t('<div class="bx-loading" />'),o.viewport.prepend(o.loader),r.css({width:"horizontal"==o.settings.mode?100*o.children.length+215+"%":"auto",position:"relative"}),o.usingCSS&&o.settings.easing?r.css("-"+o.cssPrefix+"-transition-timing-function",o.settings.easing):o.settings.easing||(o.settings.easing="swing"),f(),o.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),
o.viewport.parent().css({maxWidth:p()}),o.settings.pager||o.viewport.parent().css({margin:"0 auto 0px"}),o.children.css({"float":"horizontal"==o.settings.mode?"left":"none",listStyle:"none",position:"relative"}),o.children.css("width",u()),"horizontal"==o.settings.mode&&o.settings.slideMargin>0&&o.children.css("marginRight",o.settings.slideMargin),"vertical"==o.settings.mode&&o.settings.slideMargin>0&&o.children.css("marginBottom",o.settings.slideMargin),"fade"==o.settings.mode&&(o.children.css({position:"absolute",
zIndex:0,display:"none"}),o.children.eq(o.settings.startSlide).css({zIndex:o.settings.slideZIndex,display:"block"})),o.controls.el=t('<div class="bx-controls" />'),o.settings.captions&&P(),o.active.last=o.settings.startSlide==x()-1,o.settings.video&&r.fitVids();var e=o.children.eq(o.settings.startSlide);"all"==o.settings.preloadImages&&(e=o.children),o.settings.ticker?o.settings.pager=!1:(o.settings.pager&&T(),o.settings.controls&&C(),o.settings.auto&&o.settings.autoControls&&E(),(o.settings.controls||
o.settings.autoControls||o.settings.pager)&&o.viewport.after(o.controls.el)),g(e,h)},g=function(e,i){var s=e.find("img, iframe").length;if(0==s)return i(),void 0;var n=0;e.find("img, iframe").each(function(){t(this).one("load",function(){++n==s&&i()}).each(function(){this.complete&&t(this).load()})})},h=function(){if(o.settings.infiniteLoop&&"fade"!=o.settings.mode&&!o.settings.ticker){var e="vertical"==o.settings.mode?o.settings.minSlides:o.settings.maxSlides,i=o.children.slice(0,e).clone().addClass("bx-clone"),
s=o.children.slice(-e).clone().addClass("bx-clone");r.append(i).prepend(s)}o.loader.remove(),S(),"vertical"==o.settings.mode&&(o.settings.adaptiveHeight=!0),o.viewport.height(v()),r.redrawSlider(),o.settings.onSliderLoad(o.active.index),o.initialized=!0,o.settings.responsive&&t(window).bind("resize",Z),o.settings.auto&&o.settings.autoStart&&H(),o.settings.ticker&&L(),o.settings.pager&&q(o.settings.startSlide),o.settings.controls&&W(),o.settings.touchEnabled&&!o.settings.ticker&&O()},v=function(){var e=
0,s=t();if("vertical"==o.settings.mode||o.settings.adaptiveHeight)if(o.carousel){var n=1==o.settings.moveSlides?o.active.index:o.active.index*m();for(s=o.children.eq(n),i=1;i<=o.settings.maxSlides-1;i++)s=n+i>=o.children.length?s.add(o.children.eq(i-1)):s.add(o.children.eq(n+i))}else s=o.children.eq(o.active.index);else s=o.children;return"vertical"==o.settings.mode?(s.each(function(){e+=t(this).outerHeight()}),o.settings.slideMargin>0&&(e+=o.settings.slideMargin*(o.settings.minSlides-1))):e=Math.max.apply(Math,
s.map(function(){return t(this).outerHeight(!1)}).get()),e},p=function(){var t="100%";return o.settings.slideWidth>0&&(t="horizontal"==o.settings.mode?o.settings.maxSlides*o.settings.slideWidth+(o.settings.maxSlides-1)*o.settings.slideMargin:o.settings.slideWidth),t},u=function(){var t=o.settings.slideWidth,e=o.viewport.width();return 0==o.settings.slideWidth||o.settings.slideWidth>e&&!o.carousel||"vertical"==o.settings.mode?t=e:o.settings.maxSlides>1&&"horizontal"==o.settings.mode&&(e>o.maxThreshold||
e<o.minThreshold&&(t=(e-o.settings.slideMargin*(o.settings.minSlides-1))/o.settings.minSlides)),t},f=function(){var t=1;if("horizontal"==o.settings.mode&&o.settings.slideWidth>0)if(o.viewport.width()<o.minThreshold)t=o.settings.minSlides;else if(o.viewport.width()>o.maxThreshold)t=o.settings.maxSlides;else{var e=o.children.first().width();t=Math.floor(o.viewport.width()/e)}else"vertical"==o.settings.mode&&(t=o.settings.minSlides);return t},x=function(){var t=0;if(o.settings.moveSlides>0)if(o.settings.infiniteLoop)t=
o.children.length/m();else for(var e=0,i=0;e<o.children.length;)++t,e=i+f(),i+=o.settings.moveSlides<=f()?o.settings.moveSlides:f();else t=Math.ceil(o.children.length/f());return t},m=function(){return o.settings.moveSlides>0&&o.settings.moveSlides<=f()?o.settings.moveSlides:f()},S=function(){if(o.children.length>o.settings.maxSlides&&o.active.last&&!o.settings.infiniteLoop)if("horizontal"==o.settings.mode){var t=o.children.last(),e=t.position();b(-(e.left-(o.viewport.width()-t.width())),"reset",
0)}else{if("vertical"==o.settings.mode){var i=o.children.length-o.settings.minSlides,e=o.children.eq(i).position();b(-e.top,"reset",0)}}else{var e=o.children.eq(o.active.index*m()).position();o.active.index==x()-1&&(o.active.last=!0),void 0!=e&&("horizontal"==o.settings.mode?b(-e.left,"reset",0):"vertical"==o.settings.mode&&b(-e.top,"reset",0))}},b=function(t,e,i,s){if(o.usingCSS){var n="vertical"==o.settings.mode?"translate3d(0, "+t+"px, 0)":"translate3d("+t+"px, 0, 0)";r.css("-"+o.cssPrefix+"-transition-duration",
i/1E3+"s"),"slide"==e?(r.css(o.animProp,n),r.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){r.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),D()})):"reset"==e?r.css(o.animProp,n):"ticker"==e&&(r.css("-"+o.cssPrefix+"-transition-timing-function","linear"),r.css(o.animProp,n),r.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){r.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),
b(s.resetValue,"reset",0),N()}))}else{var a={};a[o.animProp]=t,"slide"==e?r.animate(a,i,o.settings.easing,function(){D()}):"reset"==e?r.css(o.animProp,t):"ticker"==e&&r.animate(a,speed,"linear",function(){b(s.resetValue,"reset",0),N()})}},w=function(){for(var e="",i=x(),s=0;i>s;s++){var n="";o.settings.buildPager&&t.isFunction(o.settings.buildPager)?(n=o.settings.buildPager(s),o.pagerEl.addClass("bx-custom-pager")):(n=s+1,o.pagerEl.addClass("bx-default-pager")),e+='<div class="bx-pager-item"><a href="" data-slide-index="'+
s+'" class="bx-pager-link">'+n+"</a></div>"}o.pagerEl.html(e)},T=function(){o.settings.pagerCustom?o.pagerEl=t(o.settings.pagerCustom):(o.pagerEl=t('<div class="bx-pager" />'),o.settings.pagerSelector?t(o.settings.pagerSelector).html(o.pagerEl):o.controls.el.addClass("bx-has-pager").append(o.pagerEl),w()),o.pagerEl.on("click","a",I)},C=function(){o.controls.next=t('<a class="bx-next" href="">'+o.settings.nextText+"</a>"),o.controls.prev=t('<a class="bx-prev" href="">'+o.settings.prevText+"</a>"),
o.controls.next.bind("click",y),o.controls.prev.bind("click",z),o.settings.nextSelector&&t(o.settings.nextSelector).append(o.controls.next),o.settings.prevSelector&&t(o.settings.prevSelector).append(o.controls.prev),o.settings.nextSelector||o.settings.prevSelector||(o.controls.directionEl=t('<div class="bx-controls-direction" />'),o.controls.directionEl.append(o.controls.prev).append(o.controls.next),o.controls.el.addClass("bx-has-controls-direction").append(o.controls.directionEl))},E=function(){o.controls.start=
t('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+o.settings.startText+"</a></div>"),o.controls.stop=t('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+o.settings.stopText+"</a></div>"),o.controls.autoEl=t('<div class="bx-controls-auto" />'),o.controls.autoEl.on("click",".bx-start",k),o.controls.autoEl.on("click",".bx-stop",M),o.settings.autoControlsCombine?o.controls.autoEl.append(o.controls.start):o.controls.autoEl.append(o.controls.start).append(o.controls.stop),
o.settings.autoControlsSelector?t(o.settings.autoControlsSelector).html(o.controls.autoEl):o.controls.el.addClass("bx-has-controls-auto").append(o.controls.autoEl),A(o.settings.autoStart?"stop":"start")},P=function(){o.children.each(function(){var e=t(this).find("img:first").attr("title");void 0!=e&&(""+e).length&&t(this).append('<div class="bx-caption"><span>'+e+"</span></div>")})},y=function(t){o.settings.auto&&r.stopAuto(),r.goToNextSlide(),t.preventDefault()},z=function(t){o.settings.auto&&r.stopAuto(),
r.goToPrevSlide(),t.preventDefault()},k=function(t){r.startAuto(),t.preventDefault()},M=function(t){r.stopAuto(),t.preventDefault()},I=function(e){o.settings.auto&&r.stopAuto();var i=t(e.currentTarget),s=parseInt(i.attr("data-slide-index"));s!=o.active.index&&r.goToSlide(s),e.preventDefault()},q=function(e){var i=o.children.length;return"short"==o.settings.pagerType?(o.settings.maxSlides>1&&(i=Math.ceil(o.children.length/o.settings.maxSlides)),o.pagerEl.html(e+1+o.settings.pagerShortSeparator+i),
void 0):(o.pagerEl.find("a").removeClass("active"),o.pagerEl.each(function(i,s){t(s).find("a").eq(e).addClass("active")}),void 0)},D=function(){if(o.settings.infiniteLoop){var t="";0==o.active.index?t=o.children.eq(0).position():o.active.index==x()-1&&o.carousel?t=o.children.eq((x()-1)*m()).position():o.active.index==o.children.length-1&&(t=o.children.eq(o.children.length-1).position()),t&&("horizontal"==o.settings.mode?b(-t.left,"reset",0):"vertical"==o.settings.mode&&b(-t.top,"reset",0))}o.working=
!1,o.settings.onSlideAfter(o.children.eq(o.active.index),o.oldIndex,o.active.index)},A=function(t){o.settings.autoControlsCombine?o.controls.autoEl.html(o.controls[t]):(o.controls.autoEl.find("a").removeClass("active"),o.controls.autoEl.find("a:not(.bx-"+t+")").addClass("active"))},W=function(){1==x()?(o.controls.prev.addClass("disabled"),o.controls.next.addClass("disabled")):!o.settings.infiniteLoop&&o.settings.hideControlOnEnd&&(0==o.active.index?(o.controls.prev.addClass("disabled"),o.controls.next.removeClass("disabled")):
o.active.index==x()-1?(o.controls.next.addClass("disabled"),o.controls.prev.removeClass("disabled")):(o.controls.prev.removeClass("disabled"),o.controls.next.removeClass("disabled")))},H=function(){o.settings.autoDelay>0?setTimeout(r.startAuto,o.settings.autoDelay):r.startAuto(),o.settings.autoHover&&r.hover(function(){o.interval&&(r.stopAuto(!0),o.autoPaused=!0)},function(){o.autoPaused&&(r.startAuto(!0),o.autoPaused=null)})},L=function(){var e=0;if("next"==o.settings.autoDirection)r.append(o.children.clone().addClass("bx-clone"));
else{r.prepend(o.children.clone().addClass("bx-clone"));var i=o.children.first().position();e="horizontal"==o.settings.mode?-i.left:-i.top}b(e,"reset",0),o.settings.pager=!1,o.settings.controls=!1,o.settings.autoControls=!1,o.settings.tickerHover&&!o.usingCSS&&o.viewport.hover(function(){r.stop()},function(){var e=0;o.children.each(function(){e+="horizontal"==o.settings.mode?t(this).outerWidth(!0):t(this).outerHeight(!0)});var i=o.settings.speed/e,s="horizontal"==o.settings.mode?"left":"top",n=i*
(e-Math.abs(parseInt(r.css(s))));N(n)}),N()},N=function(t){speed=t?t:o.settings.speed;var e={left:0,top:0},i={left:0,top:0};"next"==o.settings.autoDirection?e=r.find(".bx-clone").first().position():i=o.children.first().position();var s="horizontal"==o.settings.mode?-e.left:-e.top,n="horizontal"==o.settings.mode?-i.left:-i.top,a={resetValue:n};b(s,"ticker",speed,a)},O=function(){o.touch={start:{x:0,y:0},end:{x:0,y:0}},o.viewport.bind("touchstart",X)},X=function(t){if(o.working)t.preventDefault();else{o.touch.originalPos=
r.position();var e=t.originalEvent;o.touch.start.x=e.changedTouches[0].pageX,o.touch.start.y=e.changedTouches[0].pageY,o.viewport.bind("touchmove",Y),o.viewport.bind("touchend",V)}},Y=function(t){var e=t.originalEvent,i=Math.abs(e.changedTouches[0].pageX-o.touch.start.x),s=Math.abs(e.changedTouches[0].pageY-o.touch.start.y);if(3*i>s&&o.settings.preventDefaultSwipeX?t.preventDefault():3*s>i&&o.settings.preventDefaultSwipeY&&t.preventDefault(),"fade"!=o.settings.mode&&o.settings.oneToOneTouch){var n=
0;if("horizontal"==o.settings.mode){var r=e.changedTouches[0].pageX-o.touch.start.x;n=o.touch.originalPos.left+r}else{var r=e.changedTouches[0].pageY-o.touch.start.y;n=o.touch.originalPos.top+r}b(n,"reset",0)}},V=function(t){o.viewport.unbind("touchmove",Y);var e=t.originalEvent,i=0;if(o.touch.end.x=e.changedTouches[0].pageX,o.touch.end.y=e.changedTouches[0].pageY,"fade"==o.settings.mode){var s=Math.abs(o.touch.start.x-o.touch.end.x);s>=o.settings.swipeThreshold&&(o.touch.start.x>o.touch.end.x?r.goToNextSlide():
r.goToPrevSlide(),r.stopAuto())}else{var s=0;"horizontal"==o.settings.mode?(s=o.touch.end.x-o.touch.start.x,i=o.touch.originalPos.left):(s=o.touch.end.y-o.touch.start.y,i=o.touch.originalPos.top),!o.settings.infiniteLoop&&(0==o.active.index&&s>0||o.active.last&&0>s)?b(i,"reset",200):Math.abs(s)>=o.settings.swipeThreshold?(0>s?r.goToNextSlide():r.goToPrevSlide(),r.stopAuto()):b(i,"reset",200)}o.viewport.unbind("touchend",V)},Z=function(){var e=t(window).width(),i=t(window).height();(a!=e||l!=i)&&(a=
e,l=i,r.redrawSlider(),o.settings.onSliderResize.call(r,o.active.index))};return r.goToSlide=function(e,i){if(!o.working&&o.active.index!=e)if(o.working=!0,o.oldIndex=o.active.index,o.active.index=0>e?x()-1:e>=x()?0:e,o.settings.onSlideBefore(o.children.eq(o.active.index),o.oldIndex,o.active.index),"next"==i?o.settings.onSlideNext(o.children.eq(o.active.index),o.oldIndex,o.active.index):"prev"==i&&o.settings.onSlidePrev(o.children.eq(o.active.index),o.oldIndex,o.active.index),o.active.last=o.active.index>=
x()-1,o.settings.pager&&q(o.active.index),o.settings.controls&&W(),"fade"==o.settings.mode)o.settings.adaptiveHeight&&o.viewport.height()!=v()&&o.viewport.animate({height:v()},o.settings.adaptiveHeightSpeed),o.children.filter(":visible").fadeOut(o.settings.speed).css({zIndex:0}),o.children.eq(o.active.index).css("zIndex",o.settings.slideZIndex+1).fadeIn(o.settings.speed,function(){t(this).css("zIndex",o.settings.slideZIndex),D()});else{o.settings.adaptiveHeight&&o.viewport.height()!=v()&&o.viewport.animate({height:v()},
o.settings.adaptiveHeightSpeed);var s=0,n={left:0,top:0};if(!o.settings.infiniteLoop&&o.carousel&&o.active.last)if("horizontal"==o.settings.mode){var a=o.children.eq(o.children.length-1);n=a.position(),s=o.viewport.width()-a.outerWidth()}else{var l=o.children.length-o.settings.minSlides;n=o.children.eq(l).position()}else if(o.carousel&&o.active.last&&"prev"==i){var d=1==o.settings.moveSlides?o.settings.maxSlides-m():(x()-1)*m()-(o.children.length-o.settings.maxSlides),a=r.children(".bx-clone").eq(d);
n=a.position()}else if("next"==i&&0==o.active.index)n=r.find("> .bx-clone").eq(o.settings.maxSlides).position(),o.active.last=!1;else if(e>=0){var c=e*m();n=o.children.eq(c).position()}if("undefined"!=typeof n){var g="horizontal"==o.settings.mode?-(n.left-s):-n.top;b(g,"slide",o.settings.speed)}}},r.goToNextSlide=function(){if(o.settings.infiniteLoop||!o.active.last){var t=parseInt(o.active.index)+1;r.goToSlide(t,"next")}},r.goToPrevSlide=function(){if(o.settings.infiniteLoop||0!=o.active.index){var t=
parseInt(o.active.index)-1;r.goToSlide(t,"prev")}},r.startAuto=function(t){o.interval||(o.interval=setInterval(function(){"next"==o.settings.autoDirection?r.goToNextSlide():r.goToPrevSlide()},o.settings.pause),o.settings.autoControls&&1!=t&&A("stop"))},r.stopAuto=function(t){o.interval&&(clearInterval(o.interval),o.interval=null,o.settings.autoControls&&1!=t&&A("start"))},r.getCurrentSlide=function(){return o.active.index},r.getCurrentSlideElement=function(){return o.children.eq(o.active.index)},
r.getSlideCount=function(){return o.children.length},r.redrawSlider=function(){o.children.add(r.find(".bx-clone")).outerWidth(u()),o.viewport.css("height",v()),o.settings.ticker||S(),o.active.last&&(o.active.index=x()-1),o.active.index>=x()&&(o.active.last=!0),o.settings.pager&&!o.settings.pagerCustom&&(w(),q(o.active.index))},r.destroySlider=function(){o.initialized&&(o.initialized=!1,t(".bx-clone",this).remove(),o.children.each(function(){void 0!=t(this).data("origStyle")?t(this).attr("style",t(this).data("origStyle")):
t(this).removeAttr("style")}),void 0!=t(this).data("origStyle")?this.attr("style",t(this).data("origStyle")):t(this).removeAttr("style"),t(this).unwrap().unwrap(),o.controls.el&&o.controls.el.remove(),o.controls.next&&o.controls.next.remove(),o.controls.prev&&o.controls.prev.remove(),o.pagerEl&&o.settings.controls&&o.pagerEl.remove(),t(".bx-caption",this).remove(),o.controls.autoEl&&o.controls.autoEl.remove(),clearInterval(o.interval),o.settings.responsive&&t(window).unbind("resize",Z))},r.reloadSlider=
function(t){void 0!=t&&(n=t),r.destroySlider(),d()},d(),this}}(jQuery);;
/**
 * @file
 * Some basic behaviors and utility functions for Views.
 */
(function ($) {

Drupal.Views = {};

/**
 * jQuery UI tabs, Views integration component
 */
Drupal.behaviors.viewsTabs = {
  attach: function (context) {
    if ($.viewsUi && $.viewsUi.tabs) {
      $('#views-tabset').once('views-processed').viewsTabs({
        selectedClass: 'active'
      });
    }

    $('a.views-remove-link').once('views-processed').click(function(event) {
      var id = $(this).attr('id').replace('views-remove-link-', '');
      $('#views-row-' + id).hide();
      $('#views-removed-' + id).attr('checked', true);
      event.preventDefault();
   });
  /**
    * Here is to handle display deletion
    * (checking in the hidden checkbox and hiding out the row)
    */
  $('a.display-remove-link')
    .addClass('display-processed')
    .click(function() {
      var id = $(this).attr('id').replace('display-remove-link-', '');
      $('#display-row-' + id).hide();
      $('#display-removed-' + id).attr('checked', true);
      return false;
  });
  }
};

/**
 * Helper function to parse a querystring.
 */
Drupal.Views.parseQueryString = function (query) {
  var args = {};
  var pos = query.indexOf('?');
  if (pos != -1) {
    query = query.substring(pos + 1);
  }
  var pairs = query.split('&');
  for(var i in pairs) {
    if (typeof(pairs[i]) == 'string') {
      var pair = pairs[i].split('=');
      // Ignore the 'q' path argument, if present.
      if (pair[0] != 'q' && pair[1]) {
        args[decodeURIComponent(pair[0].replace(/\+/g, ' '))] = decodeURIComponent(pair[1].replace(/\+/g, ' '));
      }
    }
  }
  return args;
};

/**
 * Helper function to return a view's arguments based on a path.
 */
Drupal.Views.parseViewArgs = function (href, viewPath) {

  // Provide language prefix.
  if (Drupal.settings.pathPrefix) {
    var viewPath = Drupal.settings.pathPrefix + viewPath;
  }
  var returnObj = {};
  var path = Drupal.Views.getPath(href);
  // Ensure we have a correct path.
  if (viewPath && path.substring(0, viewPath.length + 1) == viewPath + '/') {
    var args = decodeURIComponent(path.substring(viewPath.length + 1, path.length));
    returnObj.view_args = args;
    returnObj.view_path = path;
  }
  return returnObj;
};

/**
 * Strip off the protocol plus domain from an href.
 */
Drupal.Views.pathPortion = function (href) {
  // Remove e.g. http://example.com if present.
  var protocol = window.location.protocol;
  if (href.substring(0, protocol.length) == protocol) {
    // 2 is the length of the '//' that normally follows the protocol
    href = href.substring(href.indexOf('/', protocol.length + 2));
  }
  return href;
};

/**
 * Return the Drupal path portion of an href.
 */
Drupal.Views.getPath = function (href) {
  href = Drupal.Views.pathPortion(href);
  href = href.substring(Drupal.settings.basePath.length, href.length);
  // 3 is the length of the '?q=' added to the url without clean urls.
  if (href.substring(0, 3) == '?q=') {
    href = href.substring(3, href.length);
  }
  var chars = ['#', '?', '&'];
  for (var i in chars) {
    if (href.indexOf(chars[i]) > -1) {
      href = href.substr(0, href.indexOf(chars[i]));
    }
  }
  return href;
};

})(jQuery);
;
(function($){Drupal.progressBar=function(id,updateCallback,method,errorCallback){var pb=this;this.id=id;this.method=method||"GET";this.updateCallback=updateCallback;this.errorCallback=errorCallback;this.element=$('<div class="progress" aria-live="polite"></div>').attr("id",id);this.element.html('<div class="bar"><div class="filled"></div></div>'+'<div class="percentage"></div>'+'<div class="message">&nbsp;</div>')};Drupal.progressBar.prototype.setProgress=function(percentage,message){if(percentage>=
0&&percentage<=100){$("div.filled",this.element).css("width",percentage+"%");$("div.percentage",this.element).html(percentage+"%")}$("div.message",this.element).html(message);if(this.updateCallback)this.updateCallback(percentage,message,this)};Drupal.progressBar.prototype.startMonitoring=function(uri,delay){this.delay=delay;this.uri=uri;this.sendPing()};Drupal.progressBar.prototype.stopMonitoring=function(){clearTimeout(this.timer);this.uri=null};Drupal.progressBar.prototype.sendPing=function(){if(this.timer)clearTimeout(this.timer);
if(this.uri){var pb=this;$.ajax({type:this.method,url:this.uri,data:"",dataType:"json",success:function(progress){if(progress.status==0){pb.displayError(progress.data);return}pb.setProgress(progress.percentage,progress.message);pb.timer=setTimeout(function(){pb.sendPing()},pb.delay)},error:function(xmlhttp){pb.displayError(Drupal.ajaxError(xmlhttp,pb.uri))}})}};Drupal.progressBar.prototype.displayError=function(string){var error=$('<div class="messages error"></div>').html(string);$(this.element).before(error).hide();
if(this.errorCallback)this.errorCallback(this)}})(jQuery);;
/**
 * @file
 * Handles AJAX fetching of views, including filter submission and response.
 */
(function ($) {

/**
 * Attaches the AJAX behavior to Views exposed filter forms and key View links.
 */
Drupal.behaviors.ViewsAjaxView = {};
Drupal.behaviors.ViewsAjaxView.attach = function() {
  if (Drupal.settings && Drupal.settings.views && Drupal.settings.views.ajaxViews) {
    $.each(Drupal.settings.views.ajaxViews, function(i, settings) {
      Drupal.views.instances[i] = new Drupal.views.ajaxView(settings);
    });
  }
};

Drupal.views = {};
Drupal.views.instances = {};

/**
 * Javascript object for a certain view.
 */
Drupal.views.ajaxView = function(settings) {
  var selector = '.view-dom-id-' + settings.view_dom_id;
  this.$view = $(selector);

  // Retrieve the path to use for views' ajax.
  var ajax_path = Drupal.settings.views.ajax_path;

  // If there are multiple views this might've ended up showing up multiple times.
  if (ajax_path.constructor.toString().indexOf("Array") != -1) {
    ajax_path = ajax_path[0];
  }

  // Check if there are any GET parameters to send to views.
  var queryString = window.location.search || '';
  if (queryString !== '') {
    // Remove the question mark and Drupal path component if any.
    var queryString = queryString.slice(1).replace(/q=[^&]+&?|&?render=[^&]+/, '');
    if (queryString !== '') {
      // If there is a '?' in ajax_path, clean url are on and & should be used to add parameters.
      queryString = ((/\?/.test(ajax_path)) ? '&' : '?') + queryString;
    }
  }

  this.element_settings = {
    url: ajax_path + queryString,
    submit: settings,
    setClick: true,
    event: 'click',
    selector: selector,
    progress: { type: 'throbber' }
  };

  this.settings = settings;

  // Add the ajax to exposed forms.
  this.$exposed_form = $('#views-exposed-form-'+ settings.view_name.replace(/_/g, '-') + '-' + settings.view_display_id.replace(/_/g, '-'));
  this.$exposed_form.once(jQuery.proxy(this.attachExposedFormAjax, this));

  // Store Drupal.ajax objects here for all pager links.
  this.links = [];

  // Add the ajax to pagers.
  this.$view
    // Don't attach to nested views. Doing so would attach multiple behaviors
    // to a given element.
    .filter(jQuery.proxy(this.filterNestedViews, this))
    .once(jQuery.proxy(this.attachPagerAjax, this));

  // Add a trigger to update this view specifically. In order to trigger a
  // refresh use the following code.
  //
  // @code
  // jQuery('.view-name').trigger('RefreshView');
  // @endcode
  // Add a trigger to update this view specifically.
  var self_settings = this.element_settings;
  self_settings.event = 'RefreshView';
  this.refreshViewAjax = new Drupal.ajax(this.selector, this.$view, self_settings);
};

Drupal.views.ajaxView.prototype.attachExposedFormAjax = function() {
  var button = $('input[type=submit], button[type=submit], input[type=image]', this.$exposed_form);
  button = button[0];

  this.exposedFormAjax = new Drupal.ajax($(button).attr('id'), button, this.element_settings);
};

Drupal.views.ajaxView.prototype.filterNestedViews= function() {
  // If there is at least one parent with a view class, this view
  // is nested (e.g., an attachment). Bail.
  return !this.$view.parents('.view').size();
};

/**
 * Attach the ajax behavior to each link.
 */
Drupal.views.ajaxView.prototype.attachPagerAjax = function() {
  this.$view.find('ul.pager > li > a, th.views-field a, .attachment .views-summary a')
  .each(jQuery.proxy(this.attachPagerLinkAjax, this));
};

/**
 * Attach the ajax behavior to a singe link.
 */
Drupal.views.ajaxView.prototype.attachPagerLinkAjax = function(id, link) {
  var $link = $(link);
  var viewData = {};
  var href = $link.attr('href');
  // Construct an object using the settings defaults and then overriding
  // with data specific to the link.
  $.extend(
    viewData,
    this.settings,
    Drupal.Views.parseQueryString(href),
    // Extract argument data from the URL.
    Drupal.Views.parseViewArgs(href, this.settings.view_base_path)
  );

  // For anchor tags, these will go to the target of the anchor rather
  // than the usual location.
  $.extend(viewData, Drupal.Views.parseViewArgs(href, this.settings.view_base_path));

  this.element_settings.submit = viewData;
  this.pagerAjax = new Drupal.ajax(false, $link, this.element_settings);
  this.links.push(this.pagerAjax);
};

Drupal.ajax.prototype.commands.viewsScrollTop = function (ajax, response, status) {
  // Scroll to the top of the view. This will allow users
  // to browse newly loaded content after e.g. clicking a pager
  // link.
  var offset = $(response.selector).offset();
  // We can't guarantee that the scrollable object should be
  // the body, as the view could be embedded in something
  // more complex such as a modal popup. Recurse up the DOM
  // and scroll the first element that has a non-zero top.
  var scrollTarget = response.selector;
  while ($(scrollTarget).scrollTop() == 0 && $(scrollTarget).parent()) {
    scrollTarget = $(scrollTarget).parent();
  }
  // Only scroll upward
  if (offset.top - 10 < $(scrollTarget).scrollTop()) {
    $(scrollTarget).animate({scrollTop: (offset.top - 10)}, 500);
  }
};

})(jQuery);
;
/*
 Shuffle.js by @Vestride
 Categorize, sort, and filter a responsive grid of items.
 Dependencies: jQuery 1.9+, Modernizr 2.6.2+
 @license MIT license
 @version 3.1.1
*/
window.Modernizr=function(a,b,c){function z(a){j.cssText=a}function A(a,b){return z(m.join(a+";")+(b||""))}function B(a,b){return typeof a===b}function C(a,b){return!!~(""+a).indexOf(b)}function D(a,b){for(var d in a){var e=a[d];if(!C(e,"-")&&j[e]!==c)return b=="pfx"?e:!0}return!1}function E(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:B(f,"function")?f.bind(d||b):f}return!1}function F(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+o.join(d+" ")+d).split(" ");return B(b,
"string")||B(b,"undefined")?D(e,b):(e=(a+" "+p.join(d+" ")+d).split(" "),E(e,b,c))}var d="2.6.2",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k,l={}.toString,m=" -webkit- -moz- -o- -ms- ".split(" "),n="Webkit Moz O ms",o=n.split(" "),p=n.toLowerCase().split(" "),q={},r={},s={},t=[],u=t.slice,v,w=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),l.appendChild(j);
return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i},x={}.hasOwnProperty,y;!B(x,"undefined")&&!B(x.call,"undefined")?y=function(a,b){return x.call(a,b)}:y=function(a,b){return b in a&&B(a.constructor.prototype[b],"undefined")},Function.prototype.bind||
(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=u.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(u.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(u.call(arguments)))};return e}),q.csstransforms=function(){return!!F("transform")},q.csstransforms3d=function(){var a=!!F("perspective");return a&&"webkitPerspective"in g.style&&w("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",
function(b,c){a=b.offsetLeft===9&&b.offsetHeight===3}),a},q.csstransitions=function(){return F("transition")};for(var G in q)y(q,G)&&(v=G.toLowerCase(),e[v]=q[G](),t.push((e[v]?"":"no-")+v));return e.addTest=function(a,b){if(typeof a=="object")for(var d in a)y(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,typeof f!="undefined"&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},z(""),i=k=null,e._version=d,e._prefixes=m,e._domPrefixes=p,e._cssomPrefixes=
o,e.testProp=function(a){return D([a])},e.testAllProps=F,e.testStyles=w,e.prefixed=function(a,b,c){return b?F(a,b,c):F(a,"pfx")},g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+t.join(" "):""),e}(this,this.document);
(function(factory){if(typeof define==="function"&&define.amd)define(["jquery","modernizr"],factory);else if(typeof exports==="object")module.exports=factory(require("jquery"),window.Modernizr);else window.Shuffle=factory(window.jQuery,window.Modernizr)})(function($,Modernizr,undefined){if(typeof Modernizr!=="object")throw new Error("Shuffle.js requires Modernizr.\n"+"http://vestride.github.io/Shuffle/#dependencies");function dashify(prop){if(!prop)return"";return prop.replace(/([A-Z])/g,function(str,
m1){return"-"+m1.toLowerCase()}).replace(/^ms-/,"-ms-")}var TRANSITION=Modernizr.prefixed("transition");var TRANSITION_DELAY=Modernizr.prefixed("transitionDelay");var TRANSITION_DURATION=Modernizr.prefixed("transitionDuration");var TRANSITIONEND={"WebkitTransition":"webkitTransitionEnd","transition":"transitionend"}[TRANSITION];var TRANSFORM=Modernizr.prefixed("transform");var CSS_TRANSFORM=dashify(TRANSFORM);var CAN_TRANSITION_TRANSFORMS=Modernizr.csstransforms&&Modernizr.csstransitions;var HAS_TRANSFORMS_3D=
Modernizr.csstransforms3d;var HAS_COMPUTED_STYLE=!!window.getComputedStyle;var SHUFFLE="shuffle";var ALL_ITEMS="all";var FILTER_ATTRIBUTE_KEY="groups";var DEFAULT_SCALE=1;var CONCEALED_SCALE=.001;function throttle(func,wait,options){var context,args,result;var timeout=null;var previous=0;options=options||{};var later=function(){previous=options.leading===false?0:$.now();timeout=null;result=func.apply(context,args);context=args=null};return function(){var now=$.now();if(!previous&&options.leading===
false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0||remaining>wait){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args);context=args=null}else if(!timeout&&options.trailing!==false)timeout=setTimeout(later,remaining);return result}}function each(obj,iterator,context){for(var i=0,length=obj.length;i<length;i++)if(iterator.call(context,obj[i],i,obj)==={})return}function defer(fn,context,wait){return setTimeout($.proxy(fn,context),
wait)}function arrayMax(array){return Math.max.apply(Math,array)}function arrayMin(array){return Math.min.apply(Math,array)}function getNumber(value){return $.isNumeric(value)?value:0}var getStyles=window.getComputedStyle||function(){};var Point=function(x,y){this.x=getNumber(x);this.y=getNumber(y)};Point.equals=function(a,b){return a.x===b.x&&a.y===b.y};var COMPUTED_SIZE_INCLUDES_PADDING=function(){if(!HAS_COMPUTED_STYLE)return false;var parent=document.body||document.documentElement;var e=document.createElement("div");
e.style.cssText="width:10px;padding:2px;"+"-webkit-box-sizing:border-box;box-sizing:border-box;";parent.appendChild(e);var width=getStyles(e,null).width;var ret=width==="10px";parent.removeChild(e);return ret}();var id=0;var $window=$(window);var Shuffle=function(element,options){options=options||{};$.extend(this,Shuffle.options,options,Shuffle.settings);this.$el=$(element);this.element=element;this.unique="shuffle_"+id++;this._fire(Shuffle.EventType.LOADING);this._init();defer(function(){this.initialized=
true;this._fire(Shuffle.EventType.DONE)},this,16)};Shuffle.EventType={LOADING:"loading",DONE:"done",LAYOUT:"layout",REMOVED:"removed"};Shuffle.ClassName={BASE:SHUFFLE,SHUFFLE_ITEM:"shuffle-item",FILTERED:"filtered",CONCEALED:"concealed"};Shuffle.options={group:ALL_ITEMS,speed:250,easing:"ease-out",itemSelector:"",sizer:null,gutterWidth:0,columnWidth:0,delimeter:null,buffer:0,columnThreshold:HAS_COMPUTED_STYLE?.01:.1,initialSort:null,throttle:throttle,throttleTime:300,sequentialFadeDelay:150,supported:CAN_TRANSITION_TRANSFORMS};
Shuffle.settings={useSizer:false,itemCss:{position:"absolute",top:0,left:0,visibility:"visible"},revealAppendedDelay:300,lastSort:{},lastFilter:ALL_ITEMS,enabled:true,destroyed:false,initialized:false,_animations:[],_transitions:[],_isMovementCanceled:false,styleQueue:[]};Shuffle.Point=Point;Shuffle._getItemTransformString=function(point,scale){if(HAS_TRANSFORMS_3D)return"translate3d("+point.x+"px, "+point.y+"px, 0) scale3d("+scale+", "+scale+", 1)";else return"translate("+point.x+"px, "+point.y+
"px) scale("+scale+")"};Shuffle._getNumberStyle=function(element,style,styles){if(HAS_COMPUTED_STYLE){styles=styles||getStyles(element,null);var value=Shuffle._getFloat(styles[style]);if(!COMPUTED_SIZE_INCLUDES_PADDING&&style==="width")value+=Shuffle._getFloat(styles.paddingLeft)+Shuffle._getFloat(styles.paddingRight)+Shuffle._getFloat(styles.borderLeftWidth)+Shuffle._getFloat(styles.borderRightWidth);else if(!COMPUTED_SIZE_INCLUDES_PADDING&&style==="height")value+=Shuffle._getFloat(styles.paddingTop)+
Shuffle._getFloat(styles.paddingBottom)+Shuffle._getFloat(styles.borderTopWidth)+Shuffle._getFloat(styles.borderBottomWidth);return value}else return Shuffle._getFloat($(element).css(style))};Shuffle._getFloat=function(value){return getNumber(parseFloat(value))};Shuffle._getOuterWidth=function(element,includeMargins){var styles=getStyles(element,null);var width=Shuffle._getNumberStyle(element,"width",styles);if(includeMargins){var marginLeft=Shuffle._getNumberStyle(element,"marginLeft",styles);var marginRight=
Shuffle._getNumberStyle(element,"marginRight",styles);width+=marginLeft+marginRight}return width};Shuffle._getOuterHeight=function(element,includeMargins){var styles=getStyles(element,null);var height=Shuffle._getNumberStyle(element,"height",styles);if(includeMargins){var marginTop=Shuffle._getNumberStyle(element,"marginTop",styles);var marginBottom=Shuffle._getNumberStyle(element,"marginBottom",styles);height+=marginTop+marginBottom}return height};Shuffle._skipTransition=function(element,callback,
context){var duration=element.style[TRANSITION_DURATION];element.style[TRANSITION_DURATION]="0ms";callback.call(context);var reflow=element.offsetWidth;reflow=null;element.style[TRANSITION_DURATION]=duration};Shuffle.prototype._init=function(){this.$items=this._getItems();this.sizer=this._getElementOption(this.sizer);if(this.sizer)this.useSizer=true;this.$el.addClass(Shuffle.ClassName.BASE);this._initItems();$window.on("resize."+SHUFFLE+"."+this.unique,this._getResizeFunction());var containerCSS=
this.$el.css(["position","overflow"]);var containerWidth=Shuffle._getOuterWidth(this.element);this._validateStyles(containerCSS);this._setColumns(containerWidth);this.shuffle(this.group,this.initialSort);if(this.supported)defer(function(){this._setTransitions();this.element.style[TRANSITION]="height "+this.speed+"ms "+this.easing},this)};Shuffle.prototype._getResizeFunction=function(){var resizeFunction=$.proxy(this._onResize,this);return this.throttle?this.throttle(resizeFunction,this.throttleTime):
resizeFunction};Shuffle.prototype._getElementOption=function(option){if(typeof option==="string")return this.$el.find(option)[0]||null;else if(option&&option.nodeType&&option.nodeType===1)return option;else if(option&&option.jquery)return option[0];return null};Shuffle.prototype._validateStyles=function(styles){if(styles.position==="static")this.element.style.position="relative";if(styles.overflow!=="hidden")this.element.style.overflow="hidden"};Shuffle.prototype._filter=function(category,$collection){category=
category||this.lastFilter;$collection=$collection||this.$items;var set=this._getFilteredSets(category,$collection);this._toggleFilterClasses(set.filtered,set.concealed);this.lastFilter=category;if(typeof category==="string")this.group=category;return set.filtered};Shuffle.prototype._getFilteredSets=function(category,$items){var $filtered=$();var $concealed=$();if(category===ALL_ITEMS)$filtered=$items;else each($items,function(el){var $item=$(el);if(this._doesPassFilter(category,$item))$filtered=$filtered.add($item);
else $concealed=$concealed.add($item)},this);return{filtered:$filtered,concealed:$concealed}};Shuffle.prototype._doesPassFilter=function(category,$item){if($.isFunction(category))return category.call($item[0],$item,this);else{var groups=$item.data(FILTER_ATTRIBUTE_KEY);var keys=this.delimeter&&!$.isArray(groups)?groups.split(this.delimeter):groups;return $.inArray(category,keys)>-1}};Shuffle.prototype._toggleFilterClasses=function($filtered,$concealed){$filtered.removeClass(Shuffle.ClassName.CONCEALED).addClass(Shuffle.ClassName.FILTERED);
$concealed.removeClass(Shuffle.ClassName.FILTERED).addClass(Shuffle.ClassName.CONCEALED)};Shuffle.prototype._initItems=function($items){$items=$items||this.$items;$items.addClass([Shuffle.ClassName.SHUFFLE_ITEM,Shuffle.ClassName.FILTERED].join(" "));$items.css(this.itemCss).data("point",new Point).data("scale",DEFAULT_SCALE)};Shuffle.prototype._updateItemCount=function(){this.visibleItems=this._getFilteredItems().length};Shuffle.prototype._setTransition=function(element){element.style[TRANSITION]=
CSS_TRANSFORM+" "+this.speed+"ms "+this.easing+", opacity "+this.speed+"ms "+this.easing};Shuffle.prototype._setTransitions=function($items){$items=$items||this.$items;each($items,function(el){this._setTransition(el)},this)};Shuffle.prototype._setSequentialDelay=function($collection){if(!this.supported)return;each($collection,function(el,i){el.style[TRANSITION_DELAY]="0ms,"+(i+1)*this.sequentialFadeDelay+"ms"},this)};Shuffle.prototype._getItems=function(){return this.$el.children(this.itemSelector)};
Shuffle.prototype._getFilteredItems=function(){return this.$items.filter("."+Shuffle.ClassName.FILTERED)};Shuffle.prototype._getConcealedItems=function(){return this.$items.filter("."+Shuffle.ClassName.CONCEALED)};Shuffle.prototype._getColumnSize=function(containerWidth,gutterSize){var size;if($.isFunction(this.columnWidth))size=this.columnWidth(containerWidth);else if(this.useSizer)size=Shuffle._getOuterWidth(this.sizer);else if(this.columnWidth)size=this.columnWidth;else if(this.$items.length>0)size=
Shuffle._getOuterWidth(this.$items[0],true);else size=containerWidth;if(size===0)size=containerWidth;return size+gutterSize};Shuffle.prototype._getGutterSize=function(containerWidth){var size;if($.isFunction(this.gutterWidth))size=this.gutterWidth(containerWidth);else if(this.useSizer)size=Shuffle._getNumberStyle(this.sizer,"marginLeft");else size=this.gutterWidth;return size};Shuffle.prototype._setColumns=function(theContainerWidth){var containerWidth=theContainerWidth||Shuffle._getOuterWidth(this.element);
var gutter=this._getGutterSize(containerWidth);var columnWidth=this._getColumnSize(containerWidth,gutter);var calculatedColumns=(containerWidth+gutter)/columnWidth;if(Math.abs(Math.round(calculatedColumns)-calculatedColumns)<this.columnThreshold)calculatedColumns=Math.round(calculatedColumns);this.cols=Math.max(Math.floor(calculatedColumns),1);this.containerWidth=containerWidth;this.colWidth=columnWidth};Shuffle.prototype._setContainerSize=function(){this.$el.css("height",this._getContainerSize())};
Shuffle.prototype._getContainerSize=function(){return arrayMax(this.positions)};Shuffle.prototype._fire=function(name,args){this.$el.trigger(name+"."+SHUFFLE,args&&args.length?args:[this])};Shuffle.prototype._resetCols=function(){var i=this.cols;this.positions=[];while(i--)this.positions.push(0)};Shuffle.prototype._layout=function(items,isOnlyPosition){each(items,function(item){this._layoutItem(item,!!isOnlyPosition)},this);this._processStyleQueue();this._setContainerSize()};Shuffle.prototype._layoutItem=
function(item,isOnlyPosition){var $item=$(item);var itemData=$item.data();var currPos=itemData.point;var currScale=itemData.scale;var itemSize={width:Shuffle._getOuterWidth(item,true),height:Shuffle._getOuterHeight(item,true)};var pos=this._getItemPosition(itemSize);if(Point.equals(currPos,pos)&&currScale===DEFAULT_SCALE)return;itemData.point=pos;itemData.scale=DEFAULT_SCALE;this.styleQueue.push({$item:$item,point:pos,scale:DEFAULT_SCALE,opacity:isOnlyPosition?0:1,skipTransition:isOnlyPosition||this.speed===
0,callfront:function(){if(!isOnlyPosition)$item.css("visibility","visible")},callback:function(){if(isOnlyPosition)$item.css("visibility","hidden")}})};Shuffle.prototype._getItemPosition=function(itemSize){var columnSpan=this._getColumnSpan(itemSize.width,this.colWidth,this.cols);var setY=this._getColumnSet(columnSpan,this.cols);var shortColumnIndex=this._getShortColumn(setY,this.buffer);var point=new Point(Math.round(this.colWidth*shortColumnIndex),Math.round(setY[shortColumnIndex]));var setHeight=
setY[shortColumnIndex]+itemSize.height;var setSpan=this.cols+1-setY.length;for(var i=0;i<setSpan;i++)this.positions[shortColumnIndex+i]=setHeight;return point};Shuffle.prototype._getColumnSpan=function(itemWidth,columnWidth,columns){var columnSpan=itemWidth/columnWidth;if(Math.abs(Math.round(columnSpan)-columnSpan)<this.columnThreshold)columnSpan=Math.round(columnSpan);return Math.min(Math.ceil(columnSpan),columns)};Shuffle.prototype._getColumnSet=function(columnSpan,columns){if(columnSpan===1)return this.positions;
else{var groupCount=columns+1-columnSpan;var groupY=[];for(var i=0;i<groupCount;i++)groupY[i]=arrayMax(this.positions.slice(i,i+columnSpan));return groupY}};Shuffle.prototype._getShortColumn=function(positions,buffer){var minPosition=arrayMin(positions);for(var i=0,len=positions.length;i<len;i++)if(positions[i]>=minPosition-buffer&&positions[i]<=minPosition+buffer)return i;return 0};Shuffle.prototype._shrink=function($collection){var $concealed=$collection||this._getConcealedItems();each($concealed,
function(item){var $item=$(item);var itemData=$item.data();if(itemData.scale===CONCEALED_SCALE)return;itemData.scale=CONCEALED_SCALE;this.styleQueue.push({$item:$item,point:itemData.point,scale:CONCEALED_SCALE,opacity:0,callback:function(){$item.css("visibility","hidden")}})},this)};Shuffle.prototype._onResize=function(){if(!this.enabled||this.destroyed)return;var containerWidth=Shuffle._getOuterWidth(this.element);if(containerWidth===this.containerWidth)return;this.update()};Shuffle.prototype._getStylesForTransition=
function(opts){var styles={opacity:opts.opacity};if(this.supported)styles[TRANSFORM]=Shuffle._getItemTransformString(opts.point,opts.scale);else{styles.left=opts.point.x;styles.top=opts.point.y}return styles};Shuffle.prototype._transition=function(opts){var styles=this._getStylesForTransition(opts);this._startItemAnimation(opts.$item,styles,opts.callfront||$.noop,opts.callback||$.noop)};Shuffle.prototype._startItemAnimation=function($item,styles,callfront,callback){var _this=this;function handleTransitionEnd(evt){if(evt.target===
evt.currentTarget){$(evt.target).off(TRANSITIONEND,handleTransitionEnd);_this._removeTransitionReference(reference);callback()}}var reference={$element:$item,handler:handleTransitionEnd};callfront();if(!this.initialized){$item.css(styles);callback();return}if(this.supported){$item.css(styles);$item.on(TRANSITIONEND,handleTransitionEnd);this._transitions.push(reference)}else{var anim=$item.stop(true).animate(styles,this.speed,"swing",callback);this._animations.push(anim.promise())}};Shuffle.prototype._processStyleQueue=
function(noLayout){if(this.isTransitioning)this._cancelMovement();var $transitions=$();each(this.styleQueue,function(transitionObj){if(transitionObj.skipTransition)this._styleImmediately(transitionObj);else{$transitions=$transitions.add(transitionObj.$item);this._transition(transitionObj)}},this);if($transitions.length>0&&this.initialized&&this.speed>0){this.isTransitioning=true;if(this.supported)this._whenCollectionDone($transitions,TRANSITIONEND,this._movementFinished);else this._whenAnimationsDone(this._movementFinished)}else if(!noLayout)defer(this._layoutEnd,
this);this.styleQueue.length=0};Shuffle.prototype._cancelMovement=function(){if(this.supported)each(this._transitions,function(transition){transition.$element.off(TRANSITIONEND,transition.handler)});else{this._isMovementCanceled=true;this.$items.stop(true);this._isMovementCanceled=false}this._transitions.length=0;this.isTransitioning=false};Shuffle.prototype._removeTransitionReference=function(ref){var indexInArray=$.inArray(ref,this._transitions);if(indexInArray>-1)this._transitions.splice(indexInArray,
1)};Shuffle.prototype._styleImmediately=function(opts){Shuffle._skipTransition(opts.$item[0],function(){opts.$item.css(this._getStylesForTransition(opts))},this)};Shuffle.prototype._movementFinished=function(){this.isTransitioning=false;this._layoutEnd()};Shuffle.prototype._layoutEnd=function(){this._fire(Shuffle.EventType.LAYOUT)};Shuffle.prototype._addItems=function($newItems,addToEnd,isSequential){this._initItems($newItems);this._setTransitions($newItems);this.$items=this._getItems();this._shrink($newItems);
each(this.styleQueue,function(transitionObj){transitionObj.skipTransition=true});this._processStyleQueue(true);if(addToEnd)this._addItemsToEnd($newItems,isSequential);else this.shuffle(this.lastFilter)};Shuffle.prototype._addItemsToEnd=function($newItems,isSequential){var $passed=this._filter(null,$newItems);var passed=$passed.get();this._updateItemCount();this._layout(passed,true);if(isSequential&&this.supported)this._setSequentialDelay(passed);this._revealAppended(passed)};Shuffle.prototype._revealAppended=
function(newFilteredItems){defer(function(){each(newFilteredItems,function(el){var $item=$(el);this._transition({$item:$item,opacity:1,point:$item.data("point"),scale:DEFAULT_SCALE})},this);this._whenCollectionDone($(newFilteredItems),TRANSITIONEND,function(){$(newFilteredItems).css(TRANSITION_DELAY,"0ms");this._movementFinished()})},this,this.revealAppendedDelay)};Shuffle.prototype._whenCollectionDone=function($collection,eventName,callback){var done=0;var items=$collection.length;var self=this;
function handleEventName(evt){if(evt.target===evt.currentTarget){$(evt.target).off(eventName,handleEventName);done++;if(done===items){self._removeTransitionReference(reference);callback.call(self)}}}var reference={$element:$collection,handler:handleEventName};$collection.on(eventName,handleEventName);this._transitions.push(reference)};Shuffle.prototype._whenAnimationsDone=function(callback){$.when.apply(null,this._animations).always($.proxy(function(){this._animations.length=0;if(!this._isMovementCanceled)callback.call(this)},
this))};Shuffle.prototype.shuffle=function(category,sortObj){if(!this.enabled)return;if(!category)category=ALL_ITEMS;this._filter(category);this._updateItemCount();this._shrink();this.sort(sortObj)};Shuffle.prototype.sort=function(opts){if(this.enabled){this._resetCols();var sortOptions=opts||this.lastSort;var items=this._getFilteredItems().sorted(sortOptions);this._layout(items);this.lastSort=sortOptions}};Shuffle.prototype.update=function(isOnlyLayout){if(this.enabled){if(!isOnlyLayout)this._setColumns();
this.sort()}};Shuffle.prototype.layout=function(){this.update(true)};Shuffle.prototype.appended=function($newItems,addToEnd,isSequential){this._addItems($newItems,addToEnd===true,isSequential!==false)};Shuffle.prototype.disable=function(){this.enabled=false};Shuffle.prototype.enable=function(isUpdateLayout){this.enabled=true;if(isUpdateLayout!==false)this.update()};Shuffle.prototype.remove=function($collection){if(!$collection.length||!$collection.jquery)return;function handleRemoved(){$collection.remove();
this.$items=this._getItems();this._updateItemCount();this._fire(Shuffle.EventType.REMOVED,[$collection,this]);$collection=null}this._toggleFilterClasses($(),$collection);this._shrink($collection);this.sort();this.$el.one(Shuffle.EventType.LAYOUT+"."+SHUFFLE,$.proxy(handleRemoved,this))};Shuffle.prototype.destroy=function(){$window.off("."+this.unique);this.$el.removeClass(SHUFFLE).removeAttr("style").removeData(SHUFFLE);this.$items.removeAttr("style").removeData("point").removeData("scale").removeClass([Shuffle.ClassName.CONCEALED,
Shuffle.ClassName.FILTERED,Shuffle.ClassName.SHUFFLE_ITEM].join(" "));this.$items=null;this.$el=null;this.sizer=null;this.element=null;this._transitions=null;this.destroyed=true};$.fn.shuffle=function(opts){var args=Array.prototype.slice.call(arguments,1);return this.each(function(){var $this=$(this);var shuffle=$this.data(SHUFFLE);if(!shuffle){shuffle=new Shuffle(this,opts);$this.data(SHUFFLE,shuffle)}else if(typeof opts==="string"&&shuffle[opts])shuffle[opts].apply(shuffle,args)})};function randomize(array){var tmp,
current;var top=array.length;if(!top)return array;while(--top){current=Math.floor(Math.random()*(top+1));tmp=array[current];array[current]=array[top];array[top]=tmp}return array}$.fn.sorted=function(options){var opts=$.extend({},$.fn.sorted.defaults,options);var arr=this.get();var revert=false;if(!arr.length)return[];if(opts.randomize)return randomize(arr);if($.isFunction(opts.by))arr.sort(function(a,b){if(revert)return 0;var valA=opts.by($(a));var valB=opts.by($(b));if(valA===undefined&&valB===undefined){revert=
true;return 0}if(valA<valB||valA==="sortFirst"||valB==="sortLast")return-1;if(valA>valB||valA==="sortLast"||valB==="sortFirst")return 1;return 0});if(revert)return this.get();if(opts.reverse)arr.reverse();return arr};$.fn.sorted.defaults={reverse:false,by:null,randomize:false};return Shuffle});;
(function($){Drupal.behaviors.dexp_grid={attach:function(context,settings){$(".dexp-grid").once("dexp-grid",function(){var $grid=$(this).find(".dexp-grid-inner"),id=$(this).attr("id"),options=settings.dexp_grid_masonry[id];if(options==null)return false;$grid.data({resize:true,sameheight:false});options.columnWidth=dexp_grid_adjust_column_width(options,$grid);var shuffle_options={itemSelector:".dexp-grid-item",speed:500,sizer:$grid.find(".shuffle__sizer")};var grid={};grid.options=$.extend({},options);
grid.update=function(){$grid.shuffle("destroy");dexp_grid_adjust_column_width(this.options,$grid);$grid.shuffle(shuffle_options)};grid.reset=function(){$grid.shuffle("destroy");options.columnWidth=dexp_grid_adjust_column_width(options,$grid);$grid.shuffle(shuffle_options)};$grid.data("grid",grid);$grid.shuffle(shuffle_options).shuffle("shuffle","all");if($grid.parent().hasClass("classic"))$grid.on("layout.shuffle",function(){var columnNum=0,ww=$(window).width();if(ww<768)columnNum=options.grid_cols_xs;
else if(ww>=768&&ww<992)columnNum=options.grid_cols_sm;else if(ww>=992&&ww<1200)columnNum=options.grid_cols_md;else if(ww>=1200)columnNum=options.grid_cols_lg;if(columnNum<2)return false;if($grid.data("sameheight"))return false;$grid.data("sameheight",true);var maxheight=0;$grid.find(".filtered").each(function(index){if($(this).height()>maxheight)maxheight=$(this).height();if(index%columnNum==columnNum-1&&index>0){$grid.find(".filtered").slice(index-columnNum+1,index+1).css({minHeight:maxheight+1});
maxheight=0}});$grid.shuffle("update");$grid.find(".filtered").css({minHeight:"auto"});setTimeout(function(){$grid.data("sameheight",false)},1E3)});var window_w=$(window).width();var resize_h=null;$(window).resize(function(){clearTimeout(resize_h);resize_h=setTimeout(function(){window.debug=window.debug||false;if($(window).width()==window_w&&!window.debug)return;window_w=$(window).width();if($grid.data("resize")){$grid.width("auto");shuffle_options.columnWidth=dexp_grid_adjust_column_width(options,
$grid);$grid.shuffle("update")}},500)}).load(function(){$grid.shuffle("update")})});$(".grid-filter").once("grid-filter",function(){var $grid=$(this).next(".dexp-grid").find(".dexp-grid-inner");$(this).find("a").on("click",function(e){e.preventDefault();if($(this).hasClass("active"))return false;$grid.css({width:$grid.width()+5});var $this=$(this),filter=$this.data("filter");if(filter=="*")$grid.shuffle("shuffle","all");else $grid.shuffle("shuffle",function($el,shuffle){if(shuffle.group!=="all"&&
$.inArray(shuffle.group,$el.data("groups"))===-1)return false;return $el.hasClass(filter)});$(this).parents(".dexp-grid-filter").find("a").removeClass("active");$(this).addClass("active");try{if(filter=="*")window.location.hash="all";else window.location.hash=filter}catch(e$0){console.log(e$0)}return false});try{var url=window.location.href,idx=url.indexOf("#"),hash=idx!=-1?url.substring(idx+1):"";if(hash!="")$("a[data-filter="+hash+"]").trigger("click")}catch(e){console.log(e)}})}};var dexp_grid_adjust_column_width=
function(options,$grid){var ww=$(window).width(),columnNum=0,columnWidth=0;if(ww<768)columnNum=options.grid_cols_xs;else if(ww>=768&&ww<992)columnNum=options.grid_cols_sm;else if(ww>=992&&ww<1200)columnNum=options.grid_cols_md;else if(ww>=1200)columnNum=options.grid_cols_lg;var columnWidth=Math.ceil(($grid.width()-(columnNum-1)*options.grid_margin)/columnNum);var columnHeight=Math.floor(columnWidth/options.grid_ratio);$grid.find(".shuffle__sizer").css({width:columnWidth,margin:options.grid_margin});
$grid.css({width:$grid.width()+columnNum});$grid.find(".dexp-grid-item").each(function(index){if($grid.parent().hasClass("masonry-resize")){var multiplier_w=$(this).attr("class").match(/item-w(\d)/),multiplier_h=$(this).attr("class").match(/item-h(\d)/);if(multiplier_w[1]==0)multiplier_w[1]=1;if(multiplier_h[1]==0)multiplier_h[1]=1;var item_width=columnNum==1?columnWidth:multiplier_w[1]*columnWidth+(multiplier_w[1]-1)*options.grid_margin,item_height=columnNum==1?columnHeight:multiplier_h[1]*columnHeight+
(multiplier_h[1]-1)*options.grid_margin;$(this).css({width:item_width,height:item_height,marginBottom:options.grid_margin})}else $(this).css({width:columnWidth,marginBottom:options.grid_margin})});return columnWidth}})(jQuery);;
Drupal.behaviors.fb_likebox={attach:function(context,settings){if(context!==document)return;(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="//connect.facebook.net/"+settings.fb_likebox_language+"/sdk.js#xfbml=1&version=v2.3";if(settings.fb_likebox_app_id)js.src+="&appId="+settings.fb_likebox_app_id;fjs.parentNode.insertBefore(js,fjs)})(document,"script","facebook-jssdk",settings)}};;
(function($){Drupal.behaviors.betterExposedFilters={attach:function(context){$(".bef-tree input[type=checkbox], .bef-checkboxes input[type=checkbox]").change(function(){_bef_highlight(this,context)}).filter(":checked").closest(".form-item",context).addClass("highlight")}};Drupal.behaviors.betterExposedFiltersSelectAllNone={attach:function(context){var selected=$(".form-checkboxes.bef-select-all-none:not(.bef-processed)");if(selected.length){var selAll=Drupal.t("Select All");var selNone=Drupal.t("Select None");
var link=$('<a class="bef-toggle" href="#">'+selAll+"</a>");link.click(function(event){event.preventDefault();event.stopPropagation();if(selAll==$(this).text())$(this).html(selNone).siblings(".bef-checkboxes, .bef-tree").find(".form-item input:checkbox").each(function(){$(this).attr("checked",true);_bef_highlight(this,context)}).end().find("input[type=checkbox]:first").change();else $(this).html(selAll).siblings(".bef-checkboxes, .bef-tree").find(".form-item input:checkbox").each(function(){$(this).attr("checked",
false);_bef_highlight(this,context)}).end().find("input[type=checkbox]:first").change()});selected.addClass("bef-processed").each(function(index){var newLink=link.clone(true);newLink.insertBefore($(".bef-checkboxes, .bef-tree",this));if($("input:checkbox:checked",this).length==$("input:checkbox",this).length)newLink.click()})}var befSettings=Drupal.settings.better_exposed_filters;if(befSettings&&befSettings.datepicker&&befSettings.datepicker_options&&$.fn.datepicker){var opt=[];$.each(befSettings.datepicker_options,
function(key,val){if(key&&val)opt[key]=JSON.parse(val)});$(".bef-datepicker").datepicker(opt)}}};Drupal.behaviors.betterExposedFiltersAllNoneNested={attach:function(context,settings){$(".form-checkboxes.bef-select-all-none-nested li").has("ul").once("bef-all-none-nested",function(){$(this).find("input.form-checkboxes:first").click(function(){var checkedParent=$(this).attr("checked");if(!checkedParent)$(this).parents("li:first").find("ul input.form-checkboxes").removeAttr("checked");else $(this).parents("li:first").find("ul input.form-checkboxes").attr("checked",
$(this).attr("checked"))}).end().find("ul input.form-checkboxes").click(function(){var checked=$(this).attr("checked");var ct=$(this).parents("ul:first").find("input.form-checkboxes:not(:checked)").size();if(!checked)$(this).parents("li:first").parents("li:first").find("input.form-checkboxes:first").removeAttr("checked");if(!ct)$(this).parents("li:first").parents("li:first").find("input.form-checkboxes:first").attr("checked",checked)})})}};Drupal.behaviors.better_exposed_filters_slider={attach:function(context,
settings){var befSettings=settings.better_exposed_filters;if(befSettings&&befSettings.slider&&befSettings.slider_options)$.each(befSettings.slider_options,function(i,sliderOptions){var containing_parent="#"+sliderOptions.viewId+" #edit-"+sliderOptions.id+"-wrapper .views-widget";var $filter=$(containing_parent);if(!$filter.length){containing_parent="#"+sliderOptions.viewId+" .bef-slider-wrapper";$filter=$(containing_parent)}$filter.once("slider-filter",function(){var $input=$(this).find("input[type=text]");
if($input.length==2){var $min=$input.parent().find("input#edit-"+sliderOptions.id+"-min"),$max=$input.parent().find("input#edit-"+sliderOptions.id+"-max"),default_min,default_max;if(!$min.length||!$max.length)return;default_min=parseFloat($min.val()==""?sliderOptions.min:$min.val(),10);default_max=parseFloat($max.val()==""?sliderOptions.max:$max.val(),10);$min.val(default_min);$max.val(default_max);$min.parents(containing_parent).after($('<div class="bef-slider"></div>').slider({range:true,min:parseFloat(sliderOptions.min,
10),max:parseFloat(sliderOptions.max,10),step:parseFloat(sliderOptions.step,10),animate:sliderOptions.animate?sliderOptions.animate:false,orientation:sliderOptions.orientation,values:[default_min,default_max],slide:function(event,ui){$min.val(ui.values[0]);$max.val(ui.values[1])},change:function(event,ui){$min.val(ui.values[0]);$max.val(ui.values[1])},stop:function(event,ui){$(this).parents("form").find(".ctools-auto-submit-click").click()}}));$min.blur(function(){befUpdateSlider($(this),0,sliderOptions)});
$max.blur(function(){befUpdateSlider($(this),1,sliderOptions)})}else if($input.length==1){if($input.attr("id")!="edit-"+sliderOptions.id)return;var default_value=parseFloat($input.val()==""?sliderOptions.min:$input.val(),10);$input.val(default_value);$input.parents(containing_parent).after($('<div class="bef-slider"></div>').slider({min:parseFloat(sliderOptions.min,10),max:parseFloat(sliderOptions.max,10),step:parseFloat(sliderOptions.step,10),animate:sliderOptions.animate?sliderOptions.animate:false,
orientation:sliderOptions.orientation,value:default_value,slide:function(event,ui){$input.val(ui.value)},change:function(event,ui){$input.val(ui.value)},stop:function(event,ui){$(this).parents("form").find(".ctools-auto-submit-click").click()}}));$input.blur(function(){befUpdateSlider($(this),null,sliderOptions)})}else return})})}};Drupal.behaviors.better_exposed_filters_select_as_links={attach:function(context,settings){$(".bef-select-as-links",context).once(function(){var $element=$(this);if(typeof settings.views==
"undefined"||typeof settings.views.ajaxViews=="undefined")return;var $uses_ajax=false;$.each(settings.views.ajaxViews,function(i,item){var $view_name=item.view_name.replace(/_/g,"-");var $view_display_id=item.view_display_id.replace(/_/g,"-");var $id="views-exposed-form-"+$view_name+"-"+$view_display_id;var $form_id=$element.parents("form").attr("id");if($form_id==$id){$uses_ajax=true;return}});if(!$uses_ajax)return;$(this).find("a").click(function(event){var $wrapper=$(this).parents(".bef-select-as-links");
var $options=$wrapper.find("select option");event.preventDefault();event.stopPropagation();$wrapper.find("select option").removeAttr("selected");var link_text=$(this).text();$selected=$options.filter(function(){return $(this).text()==link_text});$selected.attr("selected","selected");$wrapper.find(".bef-new-value").val($selected.val());$wrapper.find("a").removeClass("active");$(this).addClass("active");$wrapper.parents("form").find(".views-submit-button *[type=submit]").click()})})}};Drupal.behaviors.betterExposedFiltersRequiredFilter=
{attach:function(context,settings){$(".bef-select-as-checkboxes",context).once("bef-required-filter").ajaxComplete(function(e,xhr,s){var $element=$(this);if(typeof settings.views=="undefined"||typeof settings.views.ajaxViews=="undefined")return;var $view_name;var $view_display_id;var $uses_ajax=false;$.each(settings.views.ajaxViews,function(i,item){$view_name=item.view_name;$view_display_id=item.view_display_id;var $id="views-exposed-form-"+$view_name.replace(/_/g,"-")+"-"+$view_display_id.replace(/_/g,
"-");var $form_id=$element.parents("form").attr("id");if($form_id==$id){$uses_ajax=true;return false}});if($("input",this).length>0){var $filter_name=$("input",this).attr("name").slice(0,-2);if(Drupal.settings.better_exposed_filters.views[$view_name].displays[$view_display_id].filters[$filter_name].required&&$("input:checked",this).length==0)$("input",this).prop("checked",true)}})}};function _bef_highlight(elem,context){$elem=$(elem,context);$elem.attr("checked")?$elem.closest(".form-item",context).addClass("highlight"):
$elem.closest(".form-item",context).removeClass("highlight")}function befUpdateSlider($el,valIndex,sliderOptions){var val=parseFloat($el.val(),10),currentMin=$el.parents("div.views-widget").next(".bef-slider").slider("values",0),currentMax=$el.parents("div.views-widget").next(".bef-slider").slider("values",1);if(valIndex!=null){if(valIndex==0&&val>currentMax)val=currentMax;if(valIndex==1&&val<currentMin)val=currentMin;if(isNaN(val))val=$el.parents("div.views-widget").next(".bef-slider").slider("values",
valIndex)}else if(isNaN(val))val=$el.parents("div.views-widget").next(".bef-slider").slider("value");val=parseFloat(val,10);if(valIndex!=null)$el.parents("div.views-widget").next(".bef-slider").slider("values",valIndex,val);else $el.parents("div.views-widget").next(".bef-slider").slider("value",val)}})(jQuery);;
(function($){Drupal.toggleFieldset=function(fieldset){var $fieldset=$(fieldset);if($fieldset.is(".collapsed")){var $content=$("> .fieldset-wrapper",fieldset).hide();$fieldset.removeClass("collapsed").trigger({type:"collapsed",value:false}).find("> legend span.fieldset-legend-prefix").html(Drupal.t("Hide"));$content.slideDown({duration:"fast",easing:"linear",complete:function(){Drupal.collapseScrollIntoView(fieldset);fieldset.animating=false},step:function(){Drupal.collapseScrollIntoView(fieldset)}})}else{$fieldset.trigger({type:"collapsed",
value:true});$("> .fieldset-wrapper",fieldset).slideUp("fast",function(){$fieldset.addClass("collapsed").find("> legend span.fieldset-legend-prefix").html(Drupal.t("Show"));fieldset.animating=false})}};Drupal.collapseScrollIntoView=function(node){var h=document.documentElement.clientHeight||document.body.clientHeight||0;var offset=document.documentElement.scrollTop||document.body.scrollTop||0;var posY=$(node).offset().top;var fudge=55;if(posY+node.offsetHeight+fudge>h+offset)if(node.offsetHeight>
h)window.scrollTo(0,posY);else window.scrollTo(0,posY+node.offsetHeight-h+fudge)};Drupal.behaviors.collapse={attach:function(context,settings){$("fieldset.collapsible",context).once("collapse",function(){var $fieldset=$(this);var anchor=location.hash&&location.hash!="#"?", "+location.hash:"";if($fieldset.find(".error"+anchor).length)$fieldset.removeClass("collapsed");var summary=$('<span class="summary"></span>');$fieldset.bind("summaryUpdated",function(){var text=$.trim($fieldset.drupalGetSummary());
summary.html(text?" ("+text+")":"")}).trigger("summaryUpdated");var $legend=$("> legend .fieldset-legend",this);$('<span class="fieldset-legend-prefix element-invisible"></span>').append($fieldset.hasClass("collapsed")?Drupal.t("Show"):Drupal.t("Hide")).prependTo($legend).after(" ");var $link=$('<a class="fieldset-title" href="#"></a>').prepend($legend.contents()).appendTo($legend).click(function(){var fieldset=$fieldset.get(0);if(!fieldset.animating){fieldset.animating=true;Drupal.toggleFieldset(fieldset)}return false});
$legend.append(summary)})}}})(jQuery);;
(function($){Drupal.form_placeholder={};Drupal.form_placeholder.placeholderIsSupported=function(){var isOperaMini=Object.prototype.toString.call(window.operamini)=="[object OperaMini]";return"placeholder"in document.createElement("input")&&!isOperaMini};Drupal.behaviors.form_placeholder={attach:function(context,settings){var include=settings.form_placeholder.include;if(include)include+=", ";include+=".form-placeholder-include-children *";include+=", .form-placeholder-include";var exclude=settings.form_placeholder.exclude;
if(exclude)exclude+=", ";exclude+=".form-placeholder-exclude-children *";exclude+=", .form-placeholder-exclude";var required_indicator=settings.form_placeholder.required_indicator;$(include,context).not(exclude).each(function(){$textfield=$(this);if(!$textfield.is("input[type=text], input[type=email], input[type=password], textarea"))return;else if(Drupal.form_placeholder.placeholderIsSupported()||settings.form_placeholder.fallback_support){$form=$textfield.closest("form");$label=$form.find("label[for="+
this.id+"]");if(required_indicator==="append")$label.find(".form-required").insertAfter($textfield).prepend("&nbsp;");else if(required_indicator==="remove")$label.find(".form-required").remove();else if(required_indicator==="text")$label.find(".form-required").text("("+Drupal.t("required")+")");$textfield.attr("placeholder",$.trim($label.text()));$label.hide();if(!Drupal.form_placeholder.placeholderIsSupported()&&settings.form_placeholder.fallback_support)$textfield.placeholder()}})}}})(jQuery);;
(function($){$.prettyPhoto={version:"3.1.6"};$.fn.prettyPhoto=function(pp_settings){pp_settings=jQuery.extend({hook:"rel",animation_speed:"fast",ajaxcallback:function(){},slideshow:5E3,autoplay_slideshow:false,opacity:.8,show_title:true,allow_resize:true,allow_expand:true,default_width:500,default_height:344,counter_separator_label:"/",theme:"pp_default",horizontal_padding:20,hideflash:false,wmode:"opaque",autoplay:true,modal:false,deeplinking:true,overlay_gallery:true,overlay_gallery_max:30,keyboard_shortcuts:true,
changepicturecallback:function(){},callback:function(){},ie6_fallback:true,markup:'<div class="pp_pic_holder"> \t\t\t\t\t\t<div class="ppt">&nbsp;</div> \t\t\t\t\t\t<div class="pp_top"> \t\t\t\t\t\t\t<div class="pp_left"></div> \t\t\t\t\t\t\t<div class="pp_middle"></div> \t\t\t\t\t\t\t<div class="pp_right"></div> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div class="pp_content_container"> \t\t\t\t\t\t\t<div class="pp_left"> \t\t\t\t\t\t\t<div class="pp_right"> \t\t\t\t\t\t\t\t<div class="pp_content"> \t\t\t\t\t\t\t\t\t<div class="pp_loaderIcon"></div> \t\t\t\t\t\t\t\t\t<div class="pp_fade"> \t\t\t\t\t\t\t\t\t\t<a href="#" class="pp_expand" title="Expand the image">Expand</a> \t\t\t\t\t\t\t\t\t\t<div class="pp_hoverContainer"> \t\t\t\t\t\t\t\t\t\t\t<a class="pp_next" href="#">next</a> \t\t\t\t\t\t\t\t\t\t\t<a class="pp_previous" href="#">previous</a> \t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t\t<div id="pp_full_res"></div> \t\t\t\t\t\t\t\t\t\t<div class="pp_details"> \t\t\t\t\t\t\t\t\t\t\t<div class="pp_nav"> \t\t\t\t\t\t\t\t\t\t\t\t<a href="#" class="pp_arrow_previous">Previous</a> \t\t\t\t\t\t\t\t\t\t\t\t<p class="currentTextHolder">0/0</p> \t\t\t\t\t\t\t\t\t\t\t\t<a href="#" class="pp_arrow_next">Next</a> \t\t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t\t\t<p class="pp_description"></p> \t\t\t\t\t\t\t\t\t\t\t<div class="pp_social">{pp_social}</div> \t\t\t\t\t\t\t\t\t\t\t<a class="pp_close" href="#">Close</a> \t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div class="pp_bottom"> \t\t\t\t\t\t\t<div class="pp_left"></div> \t\t\t\t\t\t\t<div class="pp_middle"></div> \t\t\t\t\t\t\t<div class="pp_right"></div> \t\t\t\t\t\t</div> \t\t\t\t\t</div> \t\t\t\t\t<div class="pp_overlay"></div>',
gallery_markup:'<div class="pp_gallery"> \t\t\t\t\t\t\t\t<a href="#" class="pp_arrow_previous">Previous</a> \t\t\t\t\t\t\t\t<div> \t\t\t\t\t\t\t\t\t<ul> \t\t\t\t\t\t\t\t\t\t{gallery} \t\t\t\t\t\t\t\t\t</ul> \t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t<a href="#" class="pp_arrow_next">Next</a> \t\t\t\t\t\t\t</div>',image_markup:'<img id="fullResImage" src="{path}" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',
quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',
inline_markup:'<div class="pp_inline">{content}</div>',custom_markup:"",social_tools:'<div class="twitter"><a href="http://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js">\x3c/script></div><div class="facebook"><iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href={location_href}&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:500px; height:23px;" allowTransparency="true"></iframe></div>'},
pp_settings);var matchedObjects=this,percentBased=false,pp_dimensions,pp_open,pp_contentHeight,pp_contentWidth,pp_containerHeight,pp_containerWidth,windowHeight=$(window).height(),windowWidth=$(window).width(),pp_slideshow;doresize=true,scroll_pos=_get_scroll();$(window).unbind("resize.prettyphoto").bind("resize.prettyphoto",function(){_center_overlay();_resize_overlay()});if(pp_settings.keyboard_shortcuts)$(document).unbind("keydown.prettyphoto").bind("keydown.prettyphoto",function(e){if(typeof $pp_pic_holder!=
"undefined")if($pp_pic_holder.is(":visible"))switch(e.keyCode){case 37:$.prettyPhoto.changePage("previous");e.preventDefault();break;case 39:$.prettyPhoto.changePage("next");e.preventDefault();break;case 27:if(!settings.modal)$.prettyPhoto.close();e.preventDefault();break}});$.prettyPhoto.initialize=function(){settings=pp_settings;if(settings.theme=="pp_default")settings.horizontal_padding=16;theRel=$(this).attr(settings.hook);galleryRegExp=/\[(?:.*)\]/;isSet=galleryRegExp.exec(theRel)?true:false;
pp_images=isSet?jQuery.map(matchedObjects,function(n,i){if($(n).attr(settings.hook).indexOf(theRel)!=-1)return $(n).attr("href")}):$.makeArray($(this).attr("href"));pp_titles=isSet?jQuery.map(matchedObjects,function(n,i){if($(n).attr(settings.hook).indexOf(theRel)!=-1)return $(n).find("img").attr("alt")?$(n).find("img").attr("alt"):""}):$.makeArray($(this).find("img").attr("alt"));pp_descriptions=isSet?jQuery.map(matchedObjects,function(n,i){if($(n).attr(settings.hook).indexOf(theRel)!=-1)return $(n).attr("title")?
$(n).attr("title"):""}):$.makeArray($(this).attr("title"));if(pp_images.length>settings.overlay_gallery_max)settings.overlay_gallery=false;set_position=jQuery.inArray($(this).attr("href"),pp_images);rel_index=isSet?set_position:$("a["+settings.hook+"^='"+theRel+"']").index($(this));_build_overlay(this);if(settings.allow_resize)$(window).bind("scroll.prettyphoto",function(){_center_overlay()});$.prettyPhoto.open();return false};$.prettyPhoto.open=function(event){if(typeof settings=="undefined"){settings=
pp_settings;pp_images=$.makeArray(arguments[0]);pp_titles=arguments[1]?$.makeArray(arguments[1]):$.makeArray("");pp_descriptions=arguments[2]?$.makeArray(arguments[2]):$.makeArray("");isSet=pp_images.length>1?true:false;set_position=arguments[3]?arguments[3]:0;_build_overlay(event.target)}if(settings.hideflash)$("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","hidden");_checkPosition($(pp_images).size());$(".pp_loaderIcon").show();if(settings.deeplinking)setHashtag();if(settings.social_tools){facebook_like_link=
settings.social_tools.replace("{location_href}",encodeURIComponent(location.href));$pp_pic_holder.find(".pp_social").html(facebook_like_link)}if($ppt.is(":hidden"))$ppt.css("opacity",0).show();$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity);$pp_pic_holder.find(".currentTextHolder").text(set_position+1+settings.counter_separator_label+$(pp_images).size());if(typeof pp_descriptions[set_position]!="undefined"&&pp_descriptions[set_position]!="")$pp_pic_holder.find(".pp_description").show().html(unescape(pp_descriptions[set_position]));
else $pp_pic_holder.find(".pp_description").hide();movie_width=parseFloat(getParam("width",pp_images[set_position]))?getParam("width",pp_images[set_position]):settings.default_width.toString();movie_height=parseFloat(getParam("height",pp_images[set_position]))?getParam("height",pp_images[set_position]):settings.default_height.toString();percentBased=false;if(movie_height.indexOf("%")!=-1){movie_height=parseFloat($(window).height()*parseFloat(movie_height)/100-150);percentBased=true}if(movie_width.indexOf("%")!=
-1){movie_width=parseFloat($(window).width()*parseFloat(movie_width)/100-150);percentBased=true}$pp_pic_holder.fadeIn(function(){settings.show_title&&pp_titles[set_position]!=""&&typeof pp_titles[set_position]!="undefined"?$ppt.html(unescape(pp_titles[set_position])):$ppt.html("&nbsp;");imgPreloader="";skipInjection=false;switch(_getFileType(pp_images[set_position])){case "image":imgPreloader=new Image;nextImage=new Image;if(isSet&&set_position<$(pp_images).size()-1)nextImage.src=pp_images[set_position+
1];prevImage=new Image;if(isSet&&pp_images[set_position-1])prevImage.src=pp_images[set_position-1];$pp_pic_holder.find("#pp_full_res")[0].innerHTML=settings.image_markup.replace(/{path}/g,pp_images[set_position]);imgPreloader.onload=function(){pp_dimensions=_fitToViewport(imgPreloader.width,imgPreloader.height);_showContent()};imgPreloader.onerror=function(){alert("Image cannot be loaded. Make sure the path is correct and image exist.");$.prettyPhoto.close()};imgPreloader.src=pp_images[set_position];
break;case "youtube":pp_dimensions=_fitToViewport(movie_width,movie_height);movie_id=getParam("v",pp_images[set_position]);if(movie_id==""){movie_id=pp_images[set_position].split("youtu.be/");movie_id=movie_id[1];if(movie_id.indexOf("?")>0)movie_id=movie_id.substr(0,movie_id.indexOf("?"));if(movie_id.indexOf("&")>0)movie_id=movie_id.substr(0,movie_id.indexOf("&"))}movie="http://www.youtube.com/embed/"+movie_id;getParam("rel",pp_images[set_position])?movie+="?rel="+getParam("rel",pp_images[set_position]):
movie+="?rel=1";if(settings.autoplay)movie+="&autoplay=1";toInject=settings.iframe_markup.replace(/{width}/g,pp_dimensions["width"]).replace(/{height}/g,pp_dimensions["height"]).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);break;case "vimeo":pp_dimensions=_fitToViewport(movie_width,movie_height);movie_id=pp_images[set_position];var regExp=/http(s?):\/\/(www\.)?vimeo.com\/(\d+)/;var match=movie_id.match(regExp);movie="http://player.vimeo.com/video/"+match[3]+"?title=0&amp;byline=0&amp;portrait=0";
if(settings.autoplay)movie+="&autoplay=1;";vimeo_width=pp_dimensions["width"]+"/embed/?moog_width="+pp_dimensions["width"];toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,pp_dimensions["height"]).replace(/{path}/g,movie);break;case "quicktime":pp_dimensions=_fitToViewport(movie_width,movie_height);pp_dimensions["height"]+=15;pp_dimensions["contentHeight"]+=15;pp_dimensions["containerHeight"]+=15;toInject=settings.quicktime_markup.replace(/{width}/g,pp_dimensions["width"]).replace(/{height}/g,
pp_dimensions["height"]).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case "flash":pp_dimensions=_fitToViewport(movie_width,movie_height);flash_vars=pp_images[set_position];flash_vars=flash_vars.substring(pp_images[set_position].indexOf("flashvars")+10,pp_images[set_position].length);filename=pp_images[set_position];filename=filename.substring(0,filename.indexOf("?"));toInject=settings.flash_markup.replace(/{width}/g,
pp_dimensions["width"]).replace(/{height}/g,pp_dimensions["height"]).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+"?"+flash_vars);break;case "iframe":pp_dimensions=_fitToViewport(movie_width,movie_height);frame_url=pp_images[set_position];frame_url=frame_url.substr(0,frame_url.indexOf("iframe")-1);toInject=settings.iframe_markup.replace(/{width}/g,pp_dimensions["width"]).replace(/{height}/g,pp_dimensions["height"]).replace(/{path}/g,frame_url);break;case "ajax":doresize=false;pp_dimensions=
_fitToViewport(movie_width,movie_height);doresize=true;skipInjection=true;$.get(pp_images[set_position],function(responseHTML){toInject=settings.inline_markup.replace(/{content}/g,responseHTML);$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject;_showContent()});break;case "custom":pp_dimensions=_fitToViewport(movie_width,movie_height);toInject=settings.custom_markup;break;case "inline":myClone=$(pp_images[set_position]).clone().append('<br clear="all" />').css({"width":settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline"></div></div>').appendTo($("body")).show();
doresize=false;pp_dimensions=_fitToViewport($(myClone).width(),$(myClone).height());doresize=true;$(myClone).remove();toInject=settings.inline_markup.replace(/{content}/g,$(pp_images[set_position]).html());break}if(!imgPreloader&&!skipInjection){$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject;_showContent()}});return false};$.prettyPhoto.changePage=function(direction){currentGalleryPage=0;if(direction=="previous"){set_position--;if(set_position<0)set_position=$(pp_images).size()-1}else if(direction==
"next"){set_position++;if(set_position>$(pp_images).size()-1)set_position=0}else set_position=direction;rel_index=set_position;if(!doresize)doresize=true;if(settings.allow_expand)$(".pp_contract").removeClass("pp_contract").addClass("pp_expand");_hideContent(function(){$.prettyPhoto.open()})};$.prettyPhoto.changeGalleryPage=function(direction){if(direction=="next"){currentGalleryPage++;if(currentGalleryPage>totalPage)currentGalleryPage=0}else if(direction=="previous"){currentGalleryPage--;if(currentGalleryPage<
0)currentGalleryPage=totalPage}else currentGalleryPage=direction;slide_speed=direction=="next"||direction=="previous"?settings.animation_speed:0;slide_to=currentGalleryPage*(itemsPerPage*itemWidth);$pp_gallery.find("ul").animate({left:-slide_to},slide_speed)};$.prettyPhoto.startSlideshow=function(){if(typeof pp_slideshow=="undefined"){$pp_pic_holder.find(".pp_play").unbind("click").removeClass("pp_play").addClass("pp_pause").click(function(){$.prettyPhoto.stopSlideshow();return false});pp_slideshow=
setInterval($.prettyPhoto.startSlideshow,settings.slideshow)}else $.prettyPhoto.changePage("next")};$.prettyPhoto.stopSlideshow=function(){$pp_pic_holder.find(".pp_pause").unbind("click").removeClass("pp_pause").addClass("pp_play").click(function(){$.prettyPhoto.startSlideshow();return false});clearInterval(pp_slideshow);pp_slideshow=undefined};$.prettyPhoto.close=function(){if($pp_overlay.is(":animated"))return;$.prettyPhoto.stopSlideshow();$pp_pic_holder.stop().find("object,embed").css("visibility",
"hidden");$("div.pp_pic_holder,div.ppt,.pp_fade").fadeOut(settings.animation_speed,function(){$(this).remove()});$pp_overlay.fadeOut(settings.animation_speed,function(){if(settings.hideflash)$("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","visible");$(this).remove();$(window).unbind("scroll.prettyphoto");clearHashtag();settings.callback();doresize=true;pp_open=false;delete settings})};function _showContent(){$(".pp_loaderIcon").hide();projectedTop=scroll_pos["scrollTop"]+
(windowHeight/2-pp_dimensions["containerHeight"]/2);if(projectedTop<0)projectedTop=0;$ppt.fadeTo(settings.animation_speed,1);$pp_pic_holder.find(".pp_content").animate({height:pp_dimensions["contentHeight"],width:pp_dimensions["contentWidth"]},settings.animation_speed);$pp_pic_holder.animate({"top":projectedTop,"left":windowWidth/2-pp_dimensions["containerWidth"]/2<0?0:windowWidth/2-pp_dimensions["containerWidth"]/2,width:pp_dimensions["containerWidth"]},settings.animation_speed,function(){$pp_pic_holder.find(".pp_hoverContainer,#fullResImage").height(pp_dimensions["height"]).width(pp_dimensions["width"]);
$pp_pic_holder.find(".pp_fade").fadeIn(settings.animation_speed);if(isSet&&_getFileType(pp_images[set_position])=="image")$pp_pic_holder.find(".pp_hoverContainer").show();else $pp_pic_holder.find(".pp_hoverContainer").hide();if(settings.allow_expand)if(pp_dimensions["resized"])$("a.pp_expand,a.pp_contract").show();else $("a.pp_expand").hide();if(settings.autoplay_slideshow&&!pp_slideshow&&!pp_open)$.prettyPhoto.startSlideshow();settings.changepicturecallback();pp_open=true});_insert_gallery();pp_settings.ajaxcallback()}
function _hideContent(callback){$pp_pic_holder.find("#pp_full_res object,#pp_full_res embed").css("visibility","hidden");$pp_pic_holder.find(".pp_fade").fadeOut(settings.animation_speed,function(){$(".pp_loaderIcon").show();callback()})}function _checkPosition(setCount){setCount>1?$(".pp_nav").show():$(".pp_nav").hide()}function _fitToViewport(width,height){resized=false;_getDimensions(width,height);imageWidth=width,imageHeight=height;if((pp_containerWidth>windowWidth||pp_containerHeight>windowHeight)&&
doresize&&settings.allow_resize&&!percentBased){resized=true,fitting=false;while(!fitting){if(pp_containerWidth>windowWidth){imageWidth=windowWidth-200;imageHeight=height/width*imageWidth}else if(pp_containerHeight>windowHeight){imageHeight=windowHeight-200;imageWidth=width/height*imageHeight}else fitting=true;pp_containerHeight=imageHeight,pp_containerWidth=imageWidth}if(pp_containerWidth>windowWidth||pp_containerHeight>windowHeight)_fitToViewport(pp_containerWidth,pp_containerHeight);_getDimensions(imageWidth,
imageHeight)}return{width:Math.floor(imageWidth),height:Math.floor(imageHeight),containerHeight:Math.floor(pp_containerHeight),containerWidth:Math.floor(pp_containerWidth)+settings.horizontal_padding*2,contentHeight:Math.floor(pp_contentHeight),contentWidth:Math.floor(pp_contentWidth),resized:resized}}function _getDimensions(width,height){width=parseFloat(width);height=parseFloat(height);$pp_details=$pp_pic_holder.find(".pp_details");$pp_details.width(width);detailsHeight=parseFloat($pp_details.css("marginTop"))+
parseFloat($pp_details.css("marginBottom"));$pp_details=$pp_details.clone().addClass(settings.theme).width(width).appendTo($("body")).css({"position":"absolute","top":-1E4});detailsHeight+=$pp_details.height();detailsHeight=detailsHeight<=34?36:detailsHeight;$pp_details.remove();$pp_title=$pp_pic_holder.find(".ppt");$pp_title.width(width);titleHeight=parseFloat($pp_title.css("marginTop"))+parseFloat($pp_title.css("marginBottom"));$pp_title=$pp_title.clone().appendTo($("body")).css({"position":"absolute",
"top":-1E4});titleHeight+=$pp_title.height();$pp_title.remove();pp_contentHeight=height+detailsHeight;pp_contentWidth=width;pp_containerHeight=pp_contentHeight+titleHeight+$pp_pic_holder.find(".pp_top").height()+$pp_pic_holder.find(".pp_bottom").height();pp_containerWidth=width}function _getFileType(itemSrc){if(itemSrc.match(/youtube\.com\/watch/i)||itemSrc.match(/youtu\.be/i))return"youtube";else if(itemSrc.match(/vimeo\.com/i))return"vimeo";else if(itemSrc.match(/\b.mov\b/i))return"quicktime";else if(itemSrc.match(/\b.swf\b/i))return"flash";
else if(itemSrc.match(/\biframe=true\b/i))return"iframe";else if(itemSrc.match(/\bajax=true\b/i))return"ajax";else if(itemSrc.match(/\bcustom=true\b/i))return"custom";else if(itemSrc.substr(0,1)=="#")return"inline";else return"image"}function _center_overlay(){if(doresize&&typeof $pp_pic_holder!="undefined"){scroll_pos=_get_scroll();contentHeight=$pp_pic_holder.height(),contentwidth=$pp_pic_holder.width();projectedTop=windowHeight/2+scroll_pos["scrollTop"]-contentHeight/2;if(projectedTop<0)projectedTop=
0;if(contentHeight>windowHeight)return;$pp_pic_holder.css({"top":projectedTop,"left":windowWidth/2+scroll_pos["scrollLeft"]-contentwidth/2})}}function _get_scroll(){if(self.pageYOffset)return{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset};else if(document.documentElement&&document.documentElement.scrollTop)return{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft};else if(document.body)return{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft}}
function _resize_overlay(){windowHeight=$(window).height(),windowWidth=$(window).width();if(typeof $pp_overlay!="undefined")$pp_overlay.height($(document).height()).width(windowWidth)}function _insert_gallery(){if(isSet&&settings.overlay_gallery&&_getFileType(pp_images[set_position])=="image"){itemWidth=52+5;navWidth=settings.theme=="facebook"||settings.theme=="pp_default"?50:30;itemsPerPage=Math.floor((pp_dimensions["containerWidth"]-100-navWidth)/itemWidth);itemsPerPage=itemsPerPage<pp_images.length?
itemsPerPage:pp_images.length;totalPage=Math.ceil(pp_images.length/itemsPerPage)-1;if(totalPage==0){navWidth=0;$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").hide()}else $pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").show();galleryWidth=itemsPerPage*itemWidth;fullGalleryWidth=pp_images.length*itemWidth;$pp_gallery.css("margin-left",-(galleryWidth/2+navWidth/2)).find("div:first").width(galleryWidth+5).find("ul").width(fullGalleryWidth).find("li.selected").removeClass("selected");goToPage=
Math.floor(set_position/itemsPerPage)<totalPage?Math.floor(set_position/itemsPerPage):totalPage;$.prettyPhoto.changeGalleryPage(goToPage);$pp_gallery_li.filter(":eq("+set_position+")").addClass("selected")}else $pp_pic_holder.find(".pp_content").unbind("mouseenter mouseleave")}function _build_overlay(caller){if(settings.social_tools)facebook_like_link=settings.social_tools.replace("{location_href}",encodeURIComponent(location.href));settings.markup=settings.markup.replace("{pp_social}","");$("body").append(settings.markup);
$pp_pic_holder=$(".pp_pic_holder"),$ppt=$(".ppt"),$pp_overlay=$("div.pp_overlay");if(isSet&&settings.overlay_gallery){currentGalleryPage=0;toInject="";for(var i=0;i<pp_images.length;i++){if(!pp_images[i].match(/\b(jpg|jpeg|png|gif)\b/gi)){classname="default";img_src=""}else{classname="";img_src=pp_images[i]}toInject+="<li class='"+classname+"'><a href='#'><img src='"+img_src+"' width='50' alt='' /></a></li>"}toInject=settings.gallery_markup.replace(/{gallery}/g,toInject);$pp_pic_holder.find("#pp_full_res").after(toInject);
$pp_gallery=$(".pp_pic_holder .pp_gallery"),$pp_gallery_li=$pp_gallery.find("li");$pp_gallery.find(".pp_arrow_next").click(function(){$.prettyPhoto.changeGalleryPage("next");$.prettyPhoto.stopSlideshow();return false});$pp_gallery.find(".pp_arrow_previous").click(function(){$.prettyPhoto.changeGalleryPage("previous");$.prettyPhoto.stopSlideshow();return false});$pp_pic_holder.find(".pp_content").hover(function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeIn()},function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeOut()});
itemWidth=52+5;$pp_gallery_li.each(function(i){$(this).find("a").click(function(){$.prettyPhoto.changePage(i);$.prettyPhoto.stopSlideshow();return false})})}if(settings.slideshow){$pp_pic_holder.find(".pp_nav").prepend('<a href="#" class="pp_play">Play</a>');$pp_pic_holder.find(".pp_nav .pp_play").click(function(){$.prettyPhoto.startSlideshow();return false})}$pp_pic_holder.attr("class","pp_pic_holder "+settings.theme);$pp_overlay.css({"opacity":0,"height":$(document).height(),"width":$(window).width()}).bind("click",
function(){if(!settings.modal)$.prettyPhoto.close()});$("a.pp_close").bind("click",function(){$.prettyPhoto.close();return false});if(settings.allow_expand)$("a.pp_expand").bind("click",function(e){if($(this).hasClass("pp_expand")){$(this).removeClass("pp_expand").addClass("pp_contract");doresize=false}else{$(this).removeClass("pp_contract").addClass("pp_expand");doresize=true}_hideContent(function(){$.prettyPhoto.open()});return false});$pp_pic_holder.find(".pp_previous, .pp_nav .pp_arrow_previous").bind("click",
function(){$.prettyPhoto.changePage("previous");$.prettyPhoto.stopSlideshow();return false});$pp_pic_holder.find(".pp_next, .pp_nav .pp_arrow_next").bind("click",function(){$.prettyPhoto.changePage("next");$.prettyPhoto.stopSlideshow();return false});_center_overlay()}if(!pp_alreadyInitialized&&getHashtag()){pp_alreadyInitialized=true;hashIndex=getHashtag();hashRel=hashIndex;hashIndex=hashIndex.substring(hashIndex.indexOf("/")+1,hashIndex.length-1);hashRel=hashRel.substring(0,hashRel.indexOf("/"));
setTimeout(function(){$("a["+pp_settings.hook+"^='"+hashRel+"']:eq("+hashIndex+")").trigger("click")},50)}return this.unbind("click.prettyphoto").bind("click.prettyphoto",$.prettyPhoto.initialize)};function getHashtag(){var url=location.href;hashtag=url.indexOf("#prettyPhoto")!==-1?decodeURI(url.substring(url.indexOf("#prettyPhoto")+1,url.length)):false;if(hashtag)hashtag=hashtag.replace(/<|>/g,"");return hashtag}function setHashtag(){if(typeof theRel=="undefined")return;location.hash=theRel+"/"+
rel_index+"/"}function clearHashtag(){if(location.href.indexOf("#prettyPhoto")!==-1)location.hash="prettyPhoto"}function getParam(name,url){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(url);return results==null?"":results[1]}})(jQuery);var pp_alreadyInitialized=false;;
(function($){Drupal.googleanalytics={};$(document).ready(function(){$(document.body).bind("mousedown keyup touchstart",function(event){$(event.target).closest("a,area").each(function(){if(Drupal.googleanalytics.isInternal(this.href))if($(this).is(".colorbox")&&Drupal.settings.googleanalytics.trackColorbox);else if(Drupal.settings.googleanalytics.trackDownload&&Drupal.googleanalytics.isDownload(this.href))ga("send",{"hitType":"event","eventCategory":"Downloads","eventAction":Drupal.googleanalytics.getDownloadExtension(this.href).toUpperCase(),
"eventLabel":Drupal.googleanalytics.getPageUrl(this.href),"transport":"beacon"});else{if(Drupal.googleanalytics.isInternalSpecial(this.href))ga("send",{"hitType":"pageview","page":Drupal.googleanalytics.getPageUrl(this.href),"transport":"beacon"})}else if(Drupal.settings.googleanalytics.trackMailto&&$(this).is("a[href^='mailto:'],area[href^='mailto:']"))ga("send",{"hitType":"event","eventCategory":"Mails","eventAction":"Click","eventLabel":this.href.substring(7),"transport":"beacon"});else if(Drupal.settings.googleanalytics.trackOutbound&&
this.href.match(/^\w+:\/\//i))if(Drupal.settings.googleanalytics.trackDomainMode!==2||Drupal.settings.googleanalytics.trackDomainMode===2&&!Drupal.googleanalytics.isCrossDomain(this.hostname,Drupal.settings.googleanalytics.trackCrossDomains))ga("send",{"hitType":"event","eventCategory":"Outbound links","eventAction":"Click","eventLabel":this.href,"transport":"beacon"})})});if(Drupal.settings.googleanalytics.trackUrlFragments)window.onhashchange=function(){ga("send",{"hitType":"pageview","page":location.pathname+
location.search+location.hash})};if(Drupal.settings.googleanalytics.trackColorbox)$(document).bind("cbox_complete",function(){var href=$.colorbox.element().attr("href");if(href)ga("send",{"hitType":"pageview","page":Drupal.googleanalytics.getPageUrl(href)})})});Drupal.googleanalytics.isCrossDomain=function(hostname,crossDomains){if(!crossDomains)return false;else return $.inArray(hostname,crossDomains)>-1?true:false};Drupal.googleanalytics.isDownload=function(url){var isDownload=new RegExp("\\.("+
Drupal.settings.googleanalytics.trackDownloadExtensions+")([?#].*)?$","i");return isDownload.test(url)};Drupal.googleanalytics.isInternal=function(url){var isInternal=new RegExp("^(https?)://"+window.location.host,"i");return isInternal.test(url)};Drupal.googleanalytics.isInternalSpecial=function(url){var isInternalSpecial=new RegExp("(/go/.*)$","i");return isInternalSpecial.test(url)};Drupal.googleanalytics.getPageUrl=function(url){var extractInternalUrl=new RegExp("^(https?)://"+window.location.host,
"i");return url.replace(extractInternalUrl,"")};Drupal.googleanalytics.getDownloadExtension=function(url){var extractDownloadextension=new RegExp("\\.("+Drupal.settings.googleanalytics.trackDownloadExtensions+")([?#].*)?$","i");var extension=extractDownloadextension.exec(url);return extension===null?"":extension[1]}})(jQuery);;
